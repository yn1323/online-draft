# OnlineDraftアプリ React Joyride ツアーガイド設計書

## 🎯 対象ページ

### 1. **app/page.tsx (トップページ)**
- ルーム作成ボタン
- ルーム参加入力欄
- ゲーム説明エリア

### 2. **app/lobby/[id]/page.tsx (ロビーページ)**
- ルーム情報カード（URL共有機能）
- 参加ボタン
- アバター選択モーダル
- 参加者一覧

### 3. **app/draft/[id]/page.tsx (ドラフトページ)**
- 現在ラウンドの参加者状況
- 指名ボタン
- ItemSelectModal
- 指名発表ボタン
- チャット機能
- シェアボタン

## 🚀 ツアーガイド構成

### 1. **メインツアー** (初回ユーザー向け)
**フロー**: トップページ → ロビーページ → ドラフトページ
- 基本的なアプリの使い方を順番に案内

### 2. **機能別ツアー** (既存ユーザー向け)
- 共有機能の使い方
- チャット機能の使い方
- モーダル操作の使い方

### 3. **BOT対戦チュートリアル** (Gemini討議結果)
- 「今夜の映画、何観る？」ドラフト
- 3体のBOTと実際にドラフト体験
- Firebase完全バイパス

## 🏗️ 技術実装方針

### ファイル構成
```
src/components/features/tour/
├── TourProvider/           # ツアー全体の状態管理
├── TourSteps/             # ツアーステップ定義
├── TourOverlay/           # React Joyride ラッパー
├── BotTutorial/           # BOT対戦チュートリアル
└── TourControls/          # ツアー制御UI
```

### 実装のポイント
- **React Joyride**を使用
- **Jotai**で状態管理（プロジェクト方針準拠）
- **localStorage**でツアー完了状態を永続化
- **レスポンシブ対応**（PC/SP両対応）
- **data-tour-id**属性で要素を識別

## 🚪 チュートリアルへの入り口設計

### 入り口の種類

#### 1. **初回ユーザー向け（自動表示）**
- トップページアクセス時に「初回ですか？チュートリアルを見ますか？」モーダル
- 「はい」「後で」「スキップ」の選択肢

#### 2. **任意実行（手動起動）**
- 各ページのヘッダーに「？」アイコンまたは「ヘルプ」ボタン
- クリックするとツアーメニューが表示

#### 3. **機能別ヘルプ**
- 特定の機能（共有、チャット等）の近くに「？」アイコン
- その機能だけのミニツアーを開始

### ツアーメニュー構成
- 基本的な使い方（メインツアー）
- 共有機能の使い方
- チャット機能の使い方
- BOT対戦を体験

## 📋 実装スケジュール

### Phase 1: 入り口とUI作成（1週間）
- ウェルカムモーダルコンポーネント作成
- ヘルプボタンとツアーメニューUI作成
- 初回判定ロジック実装

### Phase 2: 基盤構築（1週間）
- ツアー用Jotai atom作成
- TourProviderコンポーネント作成
- React Joyride基本設定

### Phase 3: メインチュートリアル（2週間）
- 各ページのツアーステップ定義
- data-tour-id属性を既存コンポーネントに追加
- ページ遷移連携の実装

### Phase 4: 機能別ツアー（1週間）
- 個別機能のツアー実装
- ツアー選択UI作成

### Phase 5: BOT対戦チュートリアル（2週間）
- Gemini討議結果の「映画ドラフト」実装
- BOTエンジン構築
- Firebase バイパス実装

### Phase 6: 仕上げ・テスト（1週間）
- レスポンシブ対応
- E2Eテスト作成
- パフォーマンス最適化

---

このプランで、対象ページと大まかな構造を整理して、段階的に実装していく。