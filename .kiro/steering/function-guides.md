---
inclusion: manual
---

# 機能別詳細ガイド

このファイルは、OnlineDraft プロジェクトの機能別詳細ガイドを含んでいます。
手動で呼び出す際に、特定機能の詳細な仕様や実装方法を確認するために使用します。

## 📚 機能ドキュメント一覧

### 認証システムガイド

OnlineDraft の認証システムの詳細については、以下のドキュメントを参照してください：

#[[file:docs/function/auth.md]]

### ガイドツアー機能ガイド

React Joyride を使用したツアーガイド機能の設計については、以下のドキュメントを参照してください：

#[[file:docs/function/guide-tour.md]]

## 🔐 認証システム詳細

認証システムの詳細仕様については、上記のドキュメントを参照してください。

## 🎯 ガイドツアー機能詳細

### 対象ページ

1. **app/page.tsx (トップページ)**

   - ルーム作成ボタン
   - ルーム参加入力欄
   - ゲーム説明エリア

2. **app/lobby/[id]/page.tsx (ロビーページ)**

   - ルーム情報カード（URL 共有機能）
   - 参加ボタン
   - アバター選択モーダル
   - 参加者一覧

3. **app/draft/[id]/page.tsx (ドラフトページ)**
   - 現在ラウンドの参加者状況
   - 指名ボタン
   - ItemSelectModal
   - 指名発表ボタン
   - チャット機能
   - シェアボタン

### ツアーガイド構成

#### 1. メインツアー（初回ユーザー向け）

- **フロー**: トップページ → ロビーページ → ドラフトページ
- 基本的なアプリの使い方を順番に案内

#### 2. 機能別ツアー（既存ユーザー向け）

- 共有機能の使い方
- チャット機能の使い方
- モーダル操作の使い方

#### 3. BOT 対戦チュートリアル

- 「今夜の映画、何観る？」ドラフト
- 3 体の BOT と実際にドラフト体験
- Firebase 完全バイパス

### 技術実装方針

#### ファイル構成

```
src/components/features/tour/
├── TourProvider/           # ツアー全体の状態管理
├── TourSteps/             # ツアーステップ定義
├── TourOverlay/           # React Joyride ラッパー
├── BotTutorial/           # BOT対戦チュートリアル
└── TourControls/          # ツアー制御UI
```

#### 実装のポイント

- **React Joyride**を使用
- **Jotai**で状態管理（プロジェクト方針準拠）
- **localStorage**でツアー完了状態を永続化
- **レスポンシブ対応**（PC/SP 両対応）
- **data-tour-id**属性で要素を識別

### チュートリアルへの入り口設計

#### 入り口の種類

1. **初回ユーザー向け（自動表示）**

   - トップページアクセス時に「初回ですか？チュートリアルを見ますか？」モーダル
   - 「はい」「後で」「スキップ」の選択肢

2. **任意実行（手動起動）**

   - 各ページのヘッダーに「？」アイコンまたは「ヘルプ」ボタン
   - クリックするとツアーメニューが表示

3. **機能別ヘルプ**
   - 特定の機能（共有、チャット等）の近くに「？」アイコン
   - その機能だけのミニツアーを開始

#### ツアーメニュー構成

- 基本的な使い方（メインツアー）
- 共有機能の使い方
- チャット機能の使い方
- BOT 対戦を体験

## 🔧 その他の機能仕様

詳細な機能仕様については、上記のドキュメントを参照してください。

### 主要機能概要

- **リアルタイム同期**: Firebase Firestore による状態監視
- **チャット機能**: 自分/他人の視覚的区別、システムメッセージ
- **ドラフト機能**: 重複指名解決、スロット風演出
- **レスポンシブ対応**: SP/PC 2 段階ブレイクポイント
- **アニメーション**: 150ms 統一、Framer Motion 使用
- **パフォーマンス最適化**: 差分更新、Dynamic Import
- **セキュリティ**: ランダム ID、なりすまし対策
