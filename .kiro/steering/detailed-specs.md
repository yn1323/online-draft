---
inclusion: manual
---

# 詳細仕様書

このファイルは、OnlineDraft プロジェクトの詳細な機能仕様と要件定義を含んでいます。
手動で呼び出す際に、プロジェクトの全体像と詳細な仕様を確認するために使用します。

## 📋 機能仕様書

OnlineDraft の詳細な機能仕様については、以下のドキュメントを参照してください：

#[[file:docs/functional-specification.md]]

### 主要な機能概要

- **画面構成**: トップページ、ロビー画面、ドラフト実行画面の 3 画面構成
- **ゲームフロー**: 一斉入力方式による重複指名解決システム
- **UI/UX**: レスポンシブ対応（SP/PC）、アニメーション演出
- **データモデル**: Firestore を使用したリアルタイム同期
- **状態管理**: Jotai による効率的な状態管理

## 📝 要件定義書

プロジェクトの基本コンセプトと要件については、以下のドキュメントを参照してください：

#[[file:docs/requirements.md]]

### 重要な要件ポイント

- **プロダクトビジョン**: 友人同士が音声通話しながら手軽に参加できるドラフトゲーム
- **ターゲットユーザー**: 既存の友人グループ、スポーツファン、ゲーム愛好者
- **技術要件**: Next.js 15、React 19、Firebase Firestore
- **成功指標**: URL シェアから参加まで 30 秒以内、4-8 人同時接続での安定動作

## 🎯 プロダクト戦略

### 解決する課題

- 既存のドラフトゲームは登録が面倒
- 特定ジャンルに特化しすぎて汎用性がない
- オフライン開催は場所の制約がある
- リアルタイム性がないと盛り上がりに欠ける

### 基本コンセプト

- **汎用プラットフォーム**: POG（競馬）、野球、アイドル等、あらゆるジャンルに対応
- **URL シェア**: 登録不要、URL を共有するだけで参加可能
- **音声通話併用**: LINE 通話、Skype 等との併用を前提
- **リアルタイム同期**: Firebase Firestore によるリアルタイム状態共有

## 🎮 ゲーム仕様詳細

### ドラフト方式

- **一斉入力方式**: 従来の順番制ではなく、各巡目で全員が同時に選択
- **重複指名解決**: ランダム抽選による解決
- **再選択**: 重複指名敗者は同一巡目内で別選択肢を選択可能

### 演出システム

- **開票演出**: スロット風演出による一斉開票
- **アニメーション**: Framer Motion による 150ms 統一アニメーション
- **リアルタイム同期**: 全参加者の状態が即座に同期

## 🔧 技術仕様概要

### アーキテクチャ

- **フロントエンド**: Next.js 15 (App Router)、React 19、TypeScript
- **UI ライブラリ**: Chakra UI v3
- **状態管理**: Jotai
- **バックエンド**: Firebase Firestore、Firebase Anonymous Auth
- **テスト**: Vitest、Storybook、Playwright

### データモデル

- **group コレクション**: ルーム情報管理
- **user コレクション**: 参加ユーザー情報
- **selection コレクション**: 選択履歴管理

## 📊 パフォーマンス要件

### リアルタイム要件

- 全状態変更は 200ms 以内に伝播
- 4-8 人同時接続での安定動作
- モバイルデバイスで 60fps アニメーション

### ユーザー体験要件

- URL シェアから参加まで 30 秒以内
- 直感的で分かりやすい UI
- 盛り上がる開票演出

## 🚫 制約事項

### システム制約

- 参加人数: 最小 2 人、最大 8 人
- 同時接続数: ルーム内最大 8 人

### 対象外機能

- ユーザー登録・ログイン（匿名参加のみ）
- 課金・決済（完全無料）
- SNS 連携（URL 共有のみ）
- 通知機能（アプリ内通知のみ）

## 📱 対応デバイス

### メインターゲット

- スマートフォン（iOS/Android）
- PC（デスクトップ・ノート）

### レスポンシブ対応

- 2 段階ブレイクポイント（SP/PC）
- スマートフォンファースト設計
