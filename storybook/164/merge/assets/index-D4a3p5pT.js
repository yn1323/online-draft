import{j as e}from"./stack-sIG82sc5.js";import{u as z,a as V}from"./zod-C0AimxcA.js";import{r as b}from"./index-BXymfbzT.js";import{I as y}from"./index-DMJ0f1m2.js";import{R as N}from"./responsive-modal-D5A2kpYK.js";import{V as n}from"./v-stack-B_OqZo12.js";import{B as v}from"./box-COYGgHPd.js";import{H as S}from"./h-stack-D-OHByDX.js";import{T as o}from"./text-DDJjvodc.js";import{ar as B,aF as _}from"./types-DwQkBYn-.js";const u=50,i=20,m=100,q=t=>B({item:_().min(1,"アイテム名を入力してください").max(u,`${u}文字以内で入力してください`),comment:_().max(t?i:m,t?`${i}文字以内で入力してください`:`${m}文字以内で入力してください`).default("")}),j=()=>{const[t,a]=b.useState(!1);return{isOpen:t,open:()=>a(!0),close:()=>a(!1)}},E=({isOpen:t,onClose:a,onSubmit:c,defaultItem:d="",defaultComment:C="",modalTitle:I="アイテムを選択",editContext:r})=>{const p=b.useId(),F=!!r,{register:f,handleSubmit:A,formState:{errors:s,isSubmitting:l},reset:g}=z({resolver:V(q(F)),mode:"onChange",defaultValues:{item:d,comment:C}}),M=async x=>{try{await c({item:x.item,comment:x.comment}),g(),a()}catch(T){console.error("アイテム選択エラー:",T)}},h=()=>{l||(g(),a())};return e.jsx(N,{isOpen:t,onClose:h,title:I,actions:{cancel:{text:"キャンセル",onClick:h},submit:{text:"決定",type:"submit",form:p,loading:l,disabled:l}},children:e.jsxs(n,{as:"form",id:p,onSubmit:A(M),gap:4,w:"full",children:[r&&e.jsx(v,{w:"full",p:3,bg:"gray.50",borderRadius:"md",children:e.jsxs(n,{gap:2,align:"start",children:[e.jsxs(S,{children:[e.jsx(o,{fontSize:"xs",color:"gray.600",children:"ラウンド:"}),e.jsxs(o,{fontSize:"sm",fontWeight:"bold",children:["Round ",r.round]})]}),e.jsxs(S,{children:[e.jsx(o,{fontSize:"xs",color:"gray.600",children:"プレイヤー:"}),e.jsx(o,{fontSize:"sm",fontWeight:"bold",children:r.playerName})]})]})}),e.jsxs(n,{gap:2,align:"start",w:"full",children:[e.jsx(o,{fontSize:"sm",fontWeight:"bold",color:"gray.700",children:"アイテム名"}),e.jsx(y,{...f("item"),placeholder:"アイテム名を入力してください",maxLength:u,size:"lg",error:!!s.item}),s.item&&e.jsx(o,{fontSize:"sm",color:"red.500",children:s.item.message})]}),e.jsxs(n,{gap:2,align:"start",w:"full",children:[e.jsx(o,{fontSize:"sm",fontWeight:"bold",color:"gray.700",children:r?"カテゴリ":"コメント（任意）"}),e.jsx(y,{...f("comment"),placeholder:r?"カテゴリを入力してください":"この選択についてのコメント...",maxLength:r?i:m,size:"lg",error:!!s.comment}),s.comment&&e.jsx(o,{fontSize:"sm",color:"red.500",children:s.comment.message})]})]})})};try{j.displayName="useItemSelectModal",j.__docgenInfo={description:`アイテム選択モーダル用hooks
開閉制御のみを管理`,displayName:"useItemSelectModal",props:{}}}catch{}try{E.displayName="ItemSelectModal",E.__docgenInfo={description:`アイテム選択モーダルコンポーネント
react-hook-form + zodバリデーション使用`,displayName:"ItemSelectModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(data: { item: string; comment: string; }) => void | Promise<void>"}},defaultItem:{defaultValue:{value:""},description:"",name:"defaultItem",required:!1,type:{name:"string"}},defaultComment:{defaultValue:{value:""},description:"",name:"defaultComment",required:!1,type:{name:"string"}},modalTitle:{defaultValue:{value:"アイテムを選択"},description:"",name:"modalTitle",required:!1,type:{name:"string"}},editContext:{defaultValue:null,description:"",name:"editContext",required:!1,type:{name:"{ round: number; playerName: string; }"}}}}}catch{}export{E as I,j as u};
