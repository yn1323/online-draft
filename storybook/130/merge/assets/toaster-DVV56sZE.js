import"./create-recipe-context-LbQq3bM7.js";import{c as T}from"./index-BRNWFSEf.js";import{F as x,E as y,L as w}from"./index-DoZAzkdv.js";var D=T("toast").parts("group","root","title","description","actionTrigger","closeTrigger");D.build();var k=(i,c)=>({...c,...x(i)});function I(i){const c=k(i,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let f=[],t=[],m=new Set,d=[];const v=e=>(f.push(e),()=>{const s=f.indexOf(e);f.splice(s,1)}),o=e=>(f.forEach(s=>s(e)),e),b=e=>{if(t.length>=c.max){d.push(e);return}o(e),t.unshift(e)},E=()=>{for(;d.length>0&&t.length<c.max;){const e=d.shift();e&&(o(e),t.unshift(e))}},a=e=>{const s=e.id??`toast:${w()}`,u=t.find(r=>r.id===s);return m.has(s)&&m.delete(s),u?t=t.map(r=>r.id===s?o({...r,...e,id:s}):r):b({id:s,duration:c.duration,removeDelay:c.removeDelay,type:"info",...e,stacked:!c.overlap,gap:c.gap}),s},h=e=>(m.add(e),e?(f.forEach(s=>s({id:e,dismiss:!0})),t=t.filter(s=>s.id!==e),E()):(t.forEach(s=>{f.forEach(u=>u({id:s.id,dismiss:!0}))}),t=[],d=[]),e);return{attrs:c,subscribe:v,create:a,update:(e,s)=>a({id:e,...s}),remove:h,dismiss:e=>{e!=null?t=t.map(s=>s.id===e?o({...s,message:"DISMISS"}):s):t=t.map(s=>o({...s,message:"DISMISS"}))},error:e=>a({...e,type:"error"}),success:e=>a({...e,type:"success"}),info:e=>a({...e,type:"info"}),warning:e=>a({...e,type:"warning"}),loading:e=>a({...e,type:"loading"}),getVisibleToasts:()=>t.filter(e=>!m.has(e.id)),getCount:()=>t.length,promise:(e,s,u={})=>{if(!s)return;let r;s.loading!==void 0&&(r=a({...u,...s.loading,promise:e,type:"loading"}));let g=r!==void 0,p;const S=y(e).then(async n=>{if(p=["resolve",n],O(n)&&!n.ok){g=!1;const l=y(s.error,`HTTP Error! status: ${n.status}`);a({...u,...l,id:r,type:"error"})}else if(s.success!==void 0){g=!1;const l=y(s.success,n);a({...u,...l,id:r,type:"success"})}}).catch(async n=>{if(p=["reject",n],s.error!==void 0){g=!1;const l=y(s.error,n);a({...u,...l,id:r,type:"error"})}}).finally(()=>{var n;g&&(h(r),r=void 0),(n=s.finally)==null||n.call(s)});return{id:r,unwrap:()=>new Promise((n,l)=>S.then(()=>p[0]==="reject"?l(p[1]):n(p[1])).catch(l))}},pause:e=>{e!=null?t=t.map(s=>s.id===e?o({...s,message:"PAUSE"}):s):t=t.map(s=>o({...s,message:"PAUSE"}))},resume:e=>{e!=null?t=t.map(s=>s.id===e?o({...s,message:"RESUME"}):s):t=t.map(s=>o({...s,message:"RESUME"}))},isVisible:e=>!m.has(e)&&!!t.find(s=>s.id===e),isDismissed:e=>m.has(e),expand:()=>{t=t.map(e=>o({...e,stacked:!0}))},collapse:()=>{t=t.map(e=>o({...e,stacked:!1}))}}}var O=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number";const P=i=>I(i),X=P({placement:"bottom-end",pauseOnPageIdle:!0});export{X as t};
