import{c as f,d as g}from"./common-Be1Nl7Wn.js";import{c as w,e as m,s,d as n,g as u,u as h}from"./index.esm-sDRqfWCZ.js";import{r as c}from"./index-BXymfbzT.js";const x=()=>{const o=w(g,"app/onlinedraft/group"),d=c.useCallback(async e=>{f(e,50,"グループ名");const r={groupName:e.trim(),deleteFlg:!1,finishedRound:[],round:1};try{return(await m(o,{...r,createdAt:s(),updatedAt:s()})).id}catch(t){throw t instanceof Error?new Error(`グループ作成に失敗しました: ${t.message}`):new Error("グループ作成中に予期しないエラーが発生しました")}},[o]),i=c.useCallback(async e=>{var a;const r=n(o,e),t=await u(r);return t.exists()&&!((a=t.data())!=null&&a.deleteFlg)},[o]),p=c.useCallback(async e=>{try{const r=n(o,e),t=await u(r);if(!t.exists())throw new Error("グループが見つかりません");const l=t.data().round+1;await h(r,{round:l,updatedAt:s()})}catch(r){throw console.error("ラウンド更新に失敗しました:",r),r}},[o]);return{createGroup:d,checkGroupExists:i,incrementRound:p,groupCollection:o}};export{x as u};
