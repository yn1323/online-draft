import{c as pt}from"./index-BgxHbLYw.js";import{r as I,k as S,g as bt,W as gt,B as w,X as j,m as k,Y as A,Z as yt,i as $,A as W,_ as Q,$ as vt,U as V,a0 as mt,Q as Et,a1 as C,a2 as x,a3 as Ot,a4 as Nt,a5 as Ft,a6 as wt,c as kt,a as Tt}from"./index-CCD6gxM1.js";import{H as J,M as It,L as Ct}from"./index-BaE96_fK.js";import{c as Pt}from"./index-CrjboX4Z.js";function Lt(t){const e={each(n){var s;for(let i=0;i<((s=t.frames)==null?void 0:s.length);i+=1){const r=t.frames[i];r&&n(r)}},addEventListener(n,s,i){return e.each(r=>{try{r.document.addEventListener(n,s,i)}catch{}}),()=>{try{e.removeEventListener(n,s,i)}catch{}}},removeEventListener(n,s,i){e.each(r=>{try{r.document.removeEventListener(n,s,i)}catch{}})}};return e}function xt(t){const e=t.frameElement!=null?t.parent:null;return{addEventListener:(n,s,i)=>{try{e==null||e.addEventListener(n,s,i)}catch{}return()=>{try{e==null||e.removeEventListener(n,s,i)}catch{}}},removeEventListener:(n,s,i)=>{try{e==null||e.removeEventListener(n,s,i)}catch{}}}}var z="pointerdown.outside",tt="focus.outside";function Dt(t){for(const e of t)if($(e)&&A(e))return!0;return!1}var at=t=>"clientY"in t;function Bt(t,e){if(!at(e)||!t)return!1;const n=t.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width}function At(t,e){return t.y<=e.y&&e.y<=t.y+t.height&&t.x<=e.x&&e.x<=t.x+t.width}function et(t,e){if(!e||!at(t))return!1;const n=e.scrollHeight>e.clientHeight,s=n&&t.clientX>e.offsetLeft+e.clientWidth,i=e.scrollWidth>e.clientWidth,r=i&&t.clientY>e.offsetTop+e.clientHeight,o={x:e.offsetLeft,y:e.offsetTop,width:e.clientWidth+(n?16:0),height:e.clientHeight+(i?16:0)},c={x:t.clientX,y:t.clientY};return At(o,c)?s||r:!1}function St(t,e){const{exclude:n,onFocusOutside:s,onPointerDownOutside:i,onInteractOutside:r,defer:o}=e;if(!t)return;const c=S(t),u=bt(t),a=Lt(u),h=xt(u);function b(y,F){if(!$(F)||!F.isConnected||W(t,F)||Bt(t,y))return!1;const E=c.querySelector(`[aria-controls="${t.id}"]`);if(E){const O=Q(E);if(et(y,O))return!1}const L=Q(t);return et(y,L)?!1:!(n!=null&&n(F))}const d=new Set,l=gt(t==null?void 0:t.getRootNode());function f(y){function F(E){var Z;const L=o&&!j()?I:R=>R(),O=E??y,U=((Z=O==null?void 0:O.composedPath)==null?void 0:Z.call(O))??[O==null?void 0:O.target];L(()=>{const R=l?U[0]:k(y);if(!(!t||!b(y,R))){if(i||r){const ft=J(i,r);t.addEventListener(z,ft,{once:!0})}st(t,z,{bubbles:!1,cancelable:!0,detail:{originalEvent:O,contextmenu:yt(O),focusable:Dt(U),target:R}})}})}y.pointerType==="touch"?(d.forEach(E=>E()),d.add(w(c,"click",F,{once:!0})),d.add(h.addEventListener("click",F,{once:!0})),d.add(a.addEventListener("click",F,{once:!0}))):F()}const g=new Set,v=setTimeout(()=>{g.add(w(c,"pointerdown",f,!0)),g.add(h.addEventListener("pointerdown",f,!0)),g.add(a.addEventListener("pointerdown",f,!0))},0);function m(y){(o?I:E=>E())(()=>{const E=k(y);if(!(!t||!b(y,E))){if(s||r){const L=J(s,r);t.addEventListener(tt,L,{once:!0})}st(t,tt,{bubbles:!1,cancelable:!0,detail:{originalEvent:y,contextmenu:!1,focusable:A(E),target:E}})}})}return j()||(g.add(w(c,"focusin",m,!0)),g.add(h.addEventListener("focusin",m,!0)),g.add(a.addEventListener("focusin",m,!0))),()=>{clearTimeout(v),d.forEach(y=>y()),g.forEach(y=>y())}}function Rt(t,e){const{defer:n}=e,s=n?I:r=>r(),i=[];return i.push(s(()=>{const r=typeof t=="function"?t():t;i.push(St(r,e))})),()=>{i.forEach(r=>r==null?void 0:r())}}function st(t,e,n){const s=t.ownerDocument.defaultView||window,i=new s.CustomEvent(e,n);return t.dispatchEvent(i)}function Mt(t,e){const n=s=>{s.key==="Escape"&&(s.isComposing||e==null||e(s))};return w(S(t),"keydown",n,{capture:!0})}var N={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(t=>t.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(t){var s;const e=this.indexOf(t),n=this.topMostPointerBlockingLayer()?this.indexOf((s=this.topMostPointerBlockingLayer())==null?void 0:s.node):-1;return e<n},isTopMost(t){const e=this.layers[this.count()-1];return(e==null?void 0:e.node)===t},getNestedLayers(t){return Array.from(this.layers).slice(this.indexOf(t)+1)},isInNestedLayer(t,e){return this.getNestedLayers(t).some(n=>W(n.node,e))},isInBranch(t){return Array.from(this.branches).some(e=>W(e,t))},add(t){const e=this.layers.push(t);t.node.style.setProperty("--layer-index",`${e}`)},addBranch(t){this.branches.push(t)},remove(t){const e=this.indexOf(t);e<0||(e<this.count()-1&&this.getNestedLayers(t).forEach(s=>s.dismiss()),this.layers.splice(e,1),t.style.removeProperty("--layer-index"))},removeBranch(t){const e=this.branches.indexOf(t);e>=0&&this.branches.splice(e,1)},indexOf(t){return this.layers.findIndex(e=>e.node===t)},dismiss(t){var e;(e=this.layers[this.indexOf(t)])==null||e.dismiss()},clear(){this.remove(this.layers[0].node)}},it;function nt(){N.layers.forEach(({node:t})=>{t.style.pointerEvents=N.isBelowPointerBlockingLayer(t)?"none":"auto"})}function Gt(t){t.style.pointerEvents=""}function Kt(t,e){const n=S(t),s=[];return N.hasPointerBlockingLayer()&&!n.body.hasAttribute("data-inert")&&(it=document.body.style.pointerEvents,queueMicrotask(()=>{n.body.style.pointerEvents="none",n.body.setAttribute("data-inert","")})),e==null||e.forEach(i=>{const[r,o]=vt(()=>{const c=i();return $(c)?c:null},{timeout:1e3});r.then(c=>s.push(V(c,{pointerEvents:"auto"}))),s.push(o)}),()=>{N.hasPointerBlockingLayer()||(queueMicrotask(()=>{n.body.style.pointerEvents=it,n.body.removeAttribute("data-inert"),n.body.style.length===0&&n.body.removeAttribute("style")}),s.forEach(i=>i()))}}function Wt(t,e){const{warnOnMissingNode:n=!0}=e;if(n&&!t){Ct("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!t)return;const{onDismiss:s,pointerBlocking:i,exclude:r,debug:o}=e,c={dismiss:s,node:t,pointerBlocking:i};N.add(c),nt();function u(l){var g,v;const f=k(l.detail.originalEvent);N.isBelowPointerBlockingLayer(t)||N.isInBranch(f)||((g=e.onPointerDownOutside)==null||g.call(e,l),(v=e.onInteractOutside)==null||v.call(e,l),!l.defaultPrevented&&(o&&console.log("onPointerDownOutside:",l.detail.originalEvent),s==null||s()))}function a(l){var g,v;const f=k(l.detail.originalEvent);N.isInBranch(f)||((g=e.onFocusOutside)==null||g.call(e,l),(v=e.onInteractOutside)==null||v.call(e,l),!l.defaultPrevented&&(o&&console.log("onFocusOutside:",l.detail.originalEvent),s==null||s()))}function h(l){var f;N.isTopMost(t)&&((f=e.onEscapeKeyDown)==null||f.call(e,l),!l.defaultPrevented&&s&&(l.preventDefault(),s()))}function b(l){var m;if(!t)return!1;const f=typeof r=="function"?r():r,g=Array.isArray(f)?f:[f],v=(m=e.persistentElements)==null?void 0:m.map(y=>y()).filter($);return v&&g.push(...v),g.some(y=>W(y,l))||N.isInNestedLayer(t,l)}const d=[i?Kt(t,e.persistentElements):void 0,Mt(t,h),Rt(t,{exclude:b,onFocusOutside:a,onPointerDownOutside:u,defer:e.defer})];return()=>{N.remove(t),nt(),Gt(t),d.forEach(l=>l==null?void 0:l())}}function $t(t,e){const{defer:n}=e,s=n?I:r=>r(),i=[];return i.push(s(()=>{const r=It(t)?t():t;i.push(Wt(r,e))})),()=>{i.forEach(r=>r==null?void 0:r())}}var P=new WeakMap,M=new WeakMap,G={},_=0,ct=t=>t&&(t.host||ct(t.parentNode)),_t=(t,e)=>e.map(n=>{if(t.contains(n))return n;const s=ct(n);return s&&t.contains(s)?s:(console.error("[zag-js > ariaHidden] target",n,"in not contained inside",t,". Doing nothing"),null)}).filter(n=>!!n),Ht=new Set(["script","output","status","next-route-announcer"]),Vt=t=>Ht.has(t.localName)||t.role==="status"||t.hasAttribute("aria-live")?!0:t.matches("[data-live-announcer]"),Yt=(t,e)=>{const{parentNode:n,markerName:s,controlAttribute:i}=e,r=_t(n,Array.isArray(t)?t:[t]);G[s]||(G[s]=new WeakMap);const o=G[s],c=[],u=new Set,a=new Set(r),h=d=>{!d||u.has(d)||(u.add(d),h(d.parentNode))};r.forEach(h);const b=d=>{!d||a.has(d)||Array.prototype.forEach.call(d.children,l=>{if(u.has(l))b(l);else try{if(Vt(l))return;const g=l.getAttribute(i)==="true",v=(P.get(l)||0)+1,m=(o.get(l)||0)+1;P.set(l,v),o.set(l,m),c.push(l),v===1&&g&&M.set(l,!0),m===1&&l.setAttribute(s,""),g||l.setAttribute(i,"true")}catch(f){console.error("[zag-js > ariaHidden] cannot operate on ",l,f)}})};return b(n),u.clear(),_++,()=>{c.forEach(d=>{const l=P.get(d)-1,f=o.get(d)-1;P.set(d,l),o.set(d,f),l||(M.has(d)||d.removeAttribute(i),M.delete(d)),f||d.removeAttribute(s)}),_--,_||(P=new WeakMap,P=new WeakMap,M=new WeakMap,G={})}},Xt=t=>(Array.isArray(t)?t[0]:t).ownerDocument.body,qt=(t,e=Xt(t),n="data-aria-hidden")=>{if(e)return Yt(t,{parentNode:e,markerName:n,controlAttribute:"aria-hidden"})},Ut=t=>{const e=requestAnimationFrame(()=>t());return()=>cancelAnimationFrame(e)};function Zt(t,e={}){const{defer:n=!0}=e,s=n?Ut:r=>r(),i=[];return i.push(s(()=>{const o=(typeof t=="function"?t():t).filter(Boolean);o.length!==0&&i.push(qt(o))})),()=>{i.forEach(r=>r==null?void 0:r())}}var jt=Object.defineProperty,Qt=(t,e,n)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p=(t,e,n)=>Qt(t,typeof e!="symbol"?e+"":e,n),rt={activateTrap(t,e){if(t.length>0){const s=t[t.length-1];s!==e&&s.pause()}const n=t.indexOf(e);n===-1||t.splice(n,1),t.push(e)},deactivateTrap(t,e){const n=t.indexOf(e);n!==-1&&t.splice(n,1),t.length>0&&t[t.length-1].unpause()}},Jt=[],zt=class{constructor(t,e){p(this,"trapStack"),p(this,"config"),p(this,"doc"),p(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),p(this,"listenerCleanups",[]),p(this,"handleFocus",s=>{const i=k(s),r=this.findContainerIndex(i,s)>=0;if(r||Ot(i))r&&(this.state.mostRecentlyFocusedNode=i);else{s.stopImmediatePropagation();let o,c=!0;if(this.state.mostRecentlyFocusedNode)if(x(this.state.mostRecentlyFocusedNode)>0){const u=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:a}=this.state.containerGroups[u];if(a.length>0){const h=a.findIndex(b=>b===this.state.mostRecentlyFocusedNode);h>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?h+1<a.length&&(o=a[h+1],c=!1):h-1>=0&&(o=a[h-1],c=!1))}}else this.state.containerGroups.some(u=>u.tabbableNodes.some(a=>x(a)>0))||(c=!1);else c=!1;c&&(o=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),o?this.tryFocus(o):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),p(this,"handlePointerDown",s=>{const i=k(s);if(!(this.findContainerIndex(i,s)>=0)){if(B(this.config.clickOutsideDeactivates,s)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}B(this.config.allowOutsideClick,s)||s.preventDefault()}}),p(this,"handleClick",s=>{const i=k(s);this.findContainerIndex(i,s)>=0||B(this.config.clickOutsideDeactivates,s)||B(this.config.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())}),p(this,"handleTabKey",s=>{if(this.config.isKeyForward(s)||this.config.isKeyBackward(s)){this.state.recentNavEvent=s;const i=this.config.isKeyBackward(s),r=this.findNextNavNode({event:s,isBackward:i});if(!r)return;D(s)&&s.preventDefault(),this.tryFocus(r)}}),p(this,"handleEscapeKey",s=>{te(s)&&B(this.config.escapeDeactivates,s)!==!1&&(s.preventDefault(),this.deactivate())}),p(this,"_mutationObserver"),p(this,"setupMutationObserver",()=>{const s=this.doc.defaultView||window;this._mutationObserver=new s.MutationObserver(i=>{i.some(o=>Array.from(o.removedNodes).some(u=>u===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode())})}),p(this,"updateObservedNodes",()=>{var s;(s=this._mutationObserver)==null||s.disconnect(),this.state.active&&!this.state.paused&&this.state.containers.map(i=>{var r;(r=this._mutationObserver)==null||r.observe(i,{subtree:!0,childList:!0})})}),p(this,"getInitialFocusNode",()=>{let s=this.getNodeForOption("initialFocus",{hasFallback:!0});if(s===!1)return!1;if(s===void 0||s&&!A(s))if(this.findContainerIndex(this.doc.activeElement)>=0)s=this.doc.activeElement;else{const i=this.state.tabbableGroups[0];s=i&&i.firstTabbableNode||this.getNodeForOption("fallbackFocus")}else s===null&&(s=this.getNodeForOption("fallbackFocus"));if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s.isConnected||(s=this.getNodeForOption("fallbackFocus")),s}),p(this,"tryFocus",s=>{if(s!==!1&&s!==Nt(this.doc)){if(!s||!s.focus){this.tryFocus(this.getInitialFocusNode());return}s.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=s,ee(s)&&s.select()}}),p(this,"deactivate",s=>{if(!this.state.active)return this;const i={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...s};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),rt.deactivateTrap(this.trapStack,this);const r=this.getOption(i,"onDeactivate"),o=this.getOption(i,"onPostDeactivate"),c=this.getOption(i,"checkCanReturnFocus"),u=this.getOption(i,"returnFocus","returnFocusOnDeactivate");r==null||r();const a=()=>{ot(()=>{if(u){const h=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(h)}o==null||o()})};if(u&&c){const h=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return c(h).then(a,a),this}return a(),this}),p(this,"pause",s=>{if(this.state.paused||!this.state.active)return this;const i=this.getOption(s,"onPause"),r=this.getOption(s,"onPostPause");return this.state.paused=!0,i==null||i(),this.removeListeners(),this.updateObservedNodes(),r==null||r(),this}),p(this,"unpause",s=>{if(!this.state.paused||!this.state.active)return this;const i=this.getOption(s,"onUnpause"),r=this.getOption(s,"onPostUnpause");return this.state.paused=!1,i==null||i(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),r==null||r(),this}),p(this,"updateContainerElements",s=>(this.state.containers=Array.isArray(s)?s.filter(Boolean):[s].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),p(this,"getReturnFocusNode",s=>{const i=this.getNodeForOption("setReturnFocus",{params:[s]});return i||(i===!1?!1:s)}),p(this,"getOption",(s,i,r)=>s&&s[i]!==void 0?s[i]:this.config[r||i]),p(this,"getNodeForOption",(s,{hasFallback:i=!1,params:r=[]}={})=>{let o=this.config[s];if(typeof o=="function"&&(o=o(...r)),o===!0&&(o=void 0),!o){if(o===void 0||o===!1)return o;throw new Error(`\`${s}\` was specified but was not a node, or did not return a node`)}let c=o;if(typeof o=="string"){try{c=this.doc.querySelector(o)}catch(u){throw new Error(`\`${s}\` appears to be an invalid selector; error="${u.message}"`)}if(!c&&!i)throw new Error(`\`${s}\` as selector refers to no known node`)}return c}),p(this,"findNextNavNode",s=>{const{event:i,isBackward:r=!1}=s,o=s.target||k(i);this.updateTabbableNodes();let c=null;if(this.state.tabbableGroups.length>0){const u=this.findContainerIndex(o,i),a=u>=0?this.state.containerGroups[u]:void 0;if(u<0)r?c=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:c=this.state.tabbableGroups[0].firstTabbableNode;else if(r){let h=this.state.tabbableGroups.findIndex(({firstTabbableNode:b})=>o===b);if(h<0&&((a==null?void 0:a.container)===o||A(o)&&!C(o)&&!(a!=null&&a.nextTabbableNode(o,!1)))&&(h=u),h>=0){const b=h===0?this.state.tabbableGroups.length-1:h-1,d=this.state.tabbableGroups[b];c=x(o)>=0?d.lastTabbableNode:d.lastDomTabbableNode}else D(i)||(c=a==null?void 0:a.nextTabbableNode(o,!1))}else{let h=this.state.tabbableGroups.findIndex(({lastTabbableNode:b})=>o===b);if(h<0&&((a==null?void 0:a.container)===o||A(o)&&!C(o)&&!(a!=null&&a.nextTabbableNode(o)))&&(h=u),h>=0){const b=h===this.state.tabbableGroups.length-1?0:h+1,d=this.state.tabbableGroups[b];c=x(o)>=0?d.firstTabbableNode:d.firstDomTabbableNode}else D(i)||(c=a==null?void 0:a.nextTabbableNode(o))}}else c=this.getNodeForOption("fallbackFocus");return c}),this.trapStack=e.trapStack||Jt;const n={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward(s){return D(s)&&!s.shiftKey},isKeyBackward(s){return D(s)&&s.shiftKey},...e};this.doc=n.document||S(Array.isArray(t)?t[0]:t),this.config=n,this.updateContainerElements(t),this.setupMutationObserver()}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(t,e){const n=typeof(e==null?void 0:e.composedPath)=="function"?e.composedPath():void 0;return this.state.containerGroups.findIndex(({container:s,tabbableNodes:i})=>s.contains(t)||(n==null?void 0:n.includes(s))||i.find(r=>r===t))}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(t=>{const e=mt(t),n=Et(t),s=e.length>0?e[0]:void 0,i=e.length>0?e[e.length-1]:void 0,r=n.find(a=>C(a)),o=n.slice().reverse().find(a=>C(a)),c=!!e.find(a=>x(a)>0);function u(a,h=!0){const b=e.indexOf(a);return b<0?h?n.slice(n.indexOf(a)+1).find(d=>C(d)):n.slice(0,n.indexOf(a)).reverse().find(d=>C(d)):e[b+(h?1:-1)]}return{container:t,tabbableNodes:e,focusableNodes:n,posTabIndexesFound:c,firstTabbableNode:s,lastTabbableNode:i,firstDomTabbableNode:r,lastDomTabbableNode:o,nextTabbableNode:u}}),this.state.tabbableGroups=this.state.containerGroups.filter(t=>t.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(t=>t.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return rt.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?ot(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(w(this.doc,"focusin",this.handleFocus,!0),w(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),w(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),w(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),w(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),w(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(t=>t()),this.listenerCleanups=[],this}activate(t){if(this.state.active)return this;const e=this.getOption(t,"onActivate"),n=this.getOption(t,"onPostActivate"),s=this.getOption(t,"checkCanFocusTrap");s||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=this.doc.activeElement||null,e==null||e();const i=()=>{s&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),n==null||n()};return s?(s(this.state.containers.concat()).then(i,i),this):(i(),this)}},D=t=>t.key==="Tab",B=(t,...e)=>typeof t=="function"?t(...e):t,te=t=>!t.isComposing&&t.key==="Escape",ot=t=>setTimeout(t,0),ee=t=>t.localName==="input"&&"select"in t&&typeof t.select=="function";function se(t,e={}){let n;const s=I(()=>{const i=typeof t=="function"?t():t;if(i){n=new zt(i,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:i,...e,document:S(i)});try{n.activate()}catch{}}});return function(){n==null||n.deactivate(),s()}}var H="data-scroll-lock";function ie(t){const e=t.getBoundingClientRect().left;return Math.round(e)+t.scrollLeft?"paddingLeft":"paddingRight"}function ne(t){const e=t??document,n=e.defaultView??window,{documentElement:s,body:i}=e;if(i.hasAttribute(H))return;const o=n.innerWidth-s.clientWidth;i.setAttribute(H,"");const c=()=>Ft(s,"--scrollbar-width",`${o}px`),u=ie(s),a=()=>V(i,{overflow:"hidden",[u]:`${o}px`}),h=()=>{const{scrollX:d,scrollY:l,visualViewport:f}=n,g=(f==null?void 0:f.offsetLeft)??0,v=(f==null?void 0:f.offsetTop)??0,m=V(i,{position:"fixed",overflow:"hidden",top:`${-(l-Math.floor(v))}px`,left:`${-(d-Math.floor(g))}px`,right:"0",[u]:`${o}px`});return()=>{m==null||m(),n.scrollTo({left:d,top:l,behavior:"instant"})}},b=[c(),wt()?h():a()];return()=>{b.forEach(d=>d==null?void 0:d()),i.removeAttribute(H)}}var re=pt("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),T=re.build(),lt=t=>{var e;return((e=t.ids)==null?void 0:e.positioner)??`dialog:${t.id}:positioner`},dt=t=>{var e;return((e=t.ids)==null?void 0:e.backdrop)??`dialog:${t.id}:backdrop`},Y=t=>{var e;return((e=t.ids)==null?void 0:e.content)??`dialog:${t.id}:content`},ut=t=>{var e;return((e=t.ids)==null?void 0:e.trigger)??`dialog:${t.id}:trigger`},X=t=>{var e;return((e=t.ids)==null?void 0:e.title)??`dialog:${t.id}:title`},q=t=>{var e;return((e=t.ids)==null?void 0:e.description)??`dialog:${t.id}:description`},ht=t=>{var e;return((e=t.ids)==null?void 0:e.closeTrigger)??`dialog:${t.id}:close`},K=t=>t.getById(Y(t)),oe=t=>t.getById(lt(t)),ae=t=>t.getById(dt(t)),ce=t=>t.getById(ut(t)),le=t=>t.getById(X(t)),de=t=>t.getById(q(t)),ue=t=>t.getById(ht(t));function ge(t,e){const{state:n,send:s,context:i,prop:r,scope:o}=t,c=r("aria-label"),u=n.matches("open");return{open:u,setOpen(a){n.matches("open")!==a&&s({type:a?"OPEN":"CLOSE"})},getTriggerProps(){return e.button({...T.trigger.attrs,dir:r("dir"),id:ut(o),"aria-haspopup":"dialog",type:"button","aria-expanded":u,"data-state":u?"open":"closed","aria-controls":Y(o),onClick(a){a.defaultPrevented||s({type:"TOGGLE"})}})},getBackdropProps(){return e.element({...T.backdrop.attrs,dir:r("dir"),hidden:!u,id:dt(o),"data-state":u?"open":"closed"})},getPositionerProps(){return e.element({...T.positioner.attrs,dir:r("dir"),id:lt(o),style:{pointerEvents:u?void 0:"none"}})},getContentProps(){const a=i.get("rendered");return e.element({...T.content.attrs,dir:r("dir"),role:r("role"),hidden:!u,id:Y(o),tabIndex:-1,"data-state":u?"open":"closed","aria-modal":!0,"aria-label":c||void 0,"aria-labelledby":c||!a.title?void 0:X(o),"aria-describedby":a.description?q(o):void 0})},getTitleProps(){return e.element({...T.title.attrs,dir:r("dir"),id:X(o)})},getDescriptionProps(){return e.element({...T.description.attrs,dir:r("dir"),id:q(o)})},getCloseTriggerProps(){return e.button({...T.closeTrigger.attrs,dir:r("dir"),id:ht(o),type:"button",onClick(a){a.defaultPrevented||(a.stopPropagation(),s({type:"CLOSE"}))}})}}}var ye=kt({props({props:t,scope:e}){const n=t.role==="alertdialog",s=n?()=>ue(e):void 0,i=typeof t.modal=="boolean"?t.modal:!0;return{role:"dialog",modal:i,trapFocus:i,preventScroll:i,closeOnInteractOutside:!n,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:s,...t}},initialState({prop:t}){return t("open")||t("defaultOpen")?"open":"closed"},context({bindable:t}){return{rendered:t(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:t,action:e,prop:n}){t([()=>n("open")],()=>{e(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:t})=>t("open")!=null},effects:{trackDismissableElement({scope:t,send:e,prop:n}){return $t(()=>K(t),{defer:!0,pointerBlocking:n("modal"),exclude:[ce(t)],onInteractOutside(i){var r;(r=n("onInteractOutside"))==null||r(i),n("closeOnInteractOutside")||i.preventDefault()},persistentElements:n("persistentElements"),onFocusOutside:n("onFocusOutside"),onPointerDownOutside:n("onPointerDownOutside"),onEscapeKeyDown(i){var r;(r=n("onEscapeKeyDown"))==null||r(i),n("closeOnEscape")||i.preventDefault()},onDismiss(){e({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:t,prop:e}){if(e("preventScroll"))return ne(t.getDoc())},trapFocus({scope:t,prop:e}){return e("trapFocus")?se(()=>K(t),{preventScroll:!0,returnFocusOnDeactivate:!!e("restoreFocus"),initialFocus:e("initialFocusEl"),setReturnFocus:s=>{var i;return((i=e("finalFocusEl"))==null?void 0:i())??s}}):void 0},hideContentBelow({scope:t,prop:e}){return e("modal")?Zt(()=>[K(t)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:t,scope:e}){I(()=>{t.set("rendered",{title:!!le(e),description:!!de(e)})})},syncZIndex({scope:t}){I(()=>{const e=K(t);if(!e)return;const n=Tt(e);[oe(t),ae(t)].forEach(i=>{i==null||i.style.setProperty("--z-index",n.zIndex),i==null||i.style.setProperty("--layer-index",n.getPropertyValue("--layer-index"))})})},invokeOnClose({prop:t}){var e;(e=t("onOpenChange"))==null||e({open:!1})},invokeOnOpen({prop:t}){var e;(e=t("onOpenChange"))==null||e({open:!0})},toggleVisibility({prop:t,send:e,event:n}){e({type:t("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})}}}});Pt()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);export{Zt as a,re as b,ge as c,ye as m,$t as t};
