import{v as n,a as l,d as f}from"./common-BLnyBYBx.js";import{c as g,d as c,b as i}from"./index.esm-sDRqfWCZ.js";import{r as d}from"./index-BXymfbzT.js";const u=()=>{const t=g(f,"app/onlinedraft/log"),m=d.useCallback(async(r,a,s)=>{n(r,"グループID"),n(a,"ユーザーID"),n(s,"メッセージ"),l(s,200,"メッセージ");const e={groupId:r.trim(),userId:a.trim(),message:s.trim(),deleteFlg:!1};try{const o=c(t);await i(o,{...e,createdAt:new Date,date:new Date,updatedAt:new Date})}catch(o){throw o instanceof Error?new Error(`メッセージ送信に失敗しました: ${o.message}`):new Error("メッセージ送信中に予期しないエラーが発生しました")}},[t]),w=d.useCallback(async(r,a)=>{if(!r.trim())throw new Error("グループIDが必要です");if(!a.trim())throw new Error("メッセージを入力してください");const s={groupId:r.trim(),userId:"system",message:a.trim(),deleteFlg:!1};try{const e=c(t);await i(e,{...s,createdAt:new Date,date:new Date,updatedAt:new Date})}catch(e){throw e instanceof Error?new Error(`システムメッセージ送信に失敗しました: ${e.message}`):new Error("システムメッセージ送信中に予期しないエラーが発生しました")}},[t]);return{sendMessage:m,sendSystemMessage:w,logCollection:t}};export{u};
