import{j as e,f as I}from"./stack-CmT0cqAp.js";import{A}from"./index-atc-zJlu.js";import{B as y}from"./index-ldzGPxj6.js";import{C as E}from"./index-CjYi8DrH.js";import{g as R,c as _,d as P,u as V,s as W}from"./states-Bd1A8IJM.js";import{e as C}from"./index-ByYvEZYI.js";import{B as i}from"./index-C9wz5Aoq.js";import{V as h}from"./v-stack-Dux34f0_.js";import{H as w}from"./h-stack-DXlVbU4a.js";import{T as c}from"./index-vIqmjHZR.js";import{r as D}from"./index-BXymfbzT.js";import{u as j,b as $}from"./react-BSHoCbAh.js";const q=D.forwardRef(function(u,a){const{direction:n,align:l,justify:t,wrap:d,basis:f,grow:x,shrink:m,inline:b,...S}=u;return e.jsx(I.div,{ref:a,...S,css:{display:b?"inline-flex":"flex",flexDirection:n,alignItems:l,justifyContent:t,flexWrap:d,flexBasis:f,flexGrow:x,flexShrink:m,...u.css}})}),N=$(r=>{const u=r(V),a=r(W),{round:n}=r(R);return u.filter(l=>l==null?void 0:l.id).map(l=>{const t=a.find(d=>d.userId===l.id&&d.round===n);return{id:l.id,name:l.name,avatar:l.avatar,currentPick:(t==null?void 0:t.item)||void 0,acquisitions:[]}}).filter((l,t,d)=>d.findIndex(f=>f.id===l.id)===t)}),z=({variant:r="sp",onItemSelect:u,onOpenResult:a})=>{const n=j(N),{round:l}=j(R),t=j(_),d=j(W),f=j(P),x=s=>d.some(o=>o.userId===s&&o.round===l),m=n.filter(s=>x(s.id)).length,b=n.length>0?Math.round(m/n.length*100):0,S=(s,o)=>({p:r==="pc"?2:1.5,bg:o?s?"blue.100":"green.100":s?"blue.50":"green.50",border:o?"2px solid":"1px solid",borderColor:o?s?"blue.500":"green.500":s?"blue.300":"green.300",borderRadius:"md",gap:1,align:"center",textAlign:"center"}),v=s=>s?{bg:"blue.400",color:"white",px:1,py:.5,borderRadius:"sm",fontSize:r==="pc"?"2xs":"xs",fontWeight:"bold"}:{gap:1,fontSize:r==="pc"?"2xs":"xs",color:"green.600"},B=x(t),F=m===n.length;return e.jsx(i,{w:"full",children:e.jsx(E,{variant:"elevated",size:"sm",children:e.jsxs(h,{gap:r==="pc"?2:3,w:"full",children:[e.jsxs(h,{gap:1,w:"full",children:[e.jsxs(w,{w:"full",justify:"space-between",children:[e.jsxs(c,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:["Round ",l]}),e.jsxs(c,{fontSize:"xs",color:"gray.600",children:[m,"/",n.length," 人選択完了"]})]}),e.jsx(i,{w:"full",h:"4px",bg:"gray.200",borderRadius:"full",children:e.jsx(i,{h:"full",bg:"green.500",borderRadius:"full",transition:"width 0.3s ease",width:`${b}%`})})]}),r==="pc"?e.jsx(i,{overflowX:"auto",w:"full",children:e.jsx(w,{gap:2,minW:"max-content",py:1,children:n.filter(s=>s==null?void 0:s.id).map((s,o)=>{const g=!x(s.id),p=s.id===t;return e.jsxs(h,{...S(g,p),flex:"0 0 auto",minW:"120px",maxW:"120px",children:[e.jsx(A,{avatarNumber:s.avatar,name:s.name,size:"sm"}),e.jsx(c,{fontSize:"xs",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:s.name}),g?e.jsx(i,{...v(!0),children:"選択中"}):e.jsxs(h,{gap:.5,...v(!1),children:[e.jsxs(w,{gap:1,children:[e.jsx(C,{size:10}),e.jsx(c,{children:"入力完了"})]}),p&&e.jsx(c,{fontSize:"2xs",color:"green.700",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:s.currentPick})]})]},`${s.id}-${o}`)})})}):e.jsx(i,{overflowX:"auto",w:"full",children:e.jsx(w,{gap:1,minW:"max-content",py:1,children:n.filter(s=>s==null?void 0:s.id).map((s,o)=>{const g=!x(s.id),p=s.id===t;return e.jsxs(h,{...S(g,p),flex:"0 0 auto",minW:"80px",maxW:"100px",children:[e.jsx(A,{avatarNumber:s.avatar,name:s.name,size:"xs"}),e.jsx(c,{fontSize:"xs",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:s.name}),g?e.jsx(i,{...v(!0),children:"選択中"}):e.jsxs(h,{gap:.5,...v(!1),children:[e.jsxs(w,{gap:1,children:[e.jsx(C,{size:10}),e.jsx(c,{children:"入力完了"})]}),p&&e.jsx(c,{fontSize:"2xs",color:"green.700",fontWeight:"medium",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",w:"full",textAlign:"center",children:s.currentPick})]})]},`${s.id}-${o}`)})})}),(u||a)&&e.jsx(i,{w:"full",pt:r==="pc"?1:0,children:e.jsxs(q,{direction:"row",gap:2,w:"full",children:[u&&e.jsx(i,{flex:1,w:"full",children:e.jsx(y,{variant:"primary",size:"sm",onClick:()=>u({}),width:"full",disabled:f.isActive,children:B?"指名を変更する":"指名する"})}),a&&e.jsx(i,{flex:1,w:"full",children:e.jsx(y,{variant:"secondary",size:"sm",onClick:()=>a({allSelected:F}),width:"full",disabled:m<1||f.isActive,children:"指名発表"})})]})})]})})})};try{z.displayName="CurrentRoundStatus",z.__docgenInfo={description:`現在のラウンドの参加者選択状況を表示する共通コンポーネント
PC版とSP版で表示スタイルを切り替え可能`,displayName:"CurrentRoundStatus",props:{variant:{defaultValue:{value:"sp"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"pc"'},{value:'"sp"'}]}},onOpenResult:{defaultValue:null,description:"",name:"onOpenResult",required:!1,type:{name:"(({ allSelected }: { allSelected: boolean; }) => void)"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!1,type:{name:"(({ userId, round, }: { userId?: string; round?: number; }) => void) | undefined"}}}}}catch{}export{z as C};
