import"./stack-CmT0cqAp.js";import{c as w}from"./index-BgxHbLYw.js";import{b as x,L as D,r as y,P}from"./index-BaE96_fK.js";var k=w("toast").parts("group","root","title","description","actionTrigger","closeTrigger");k.build();var I=(r,c)=>({...c,...x(r)});function O(r){const c=I(r,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let m=[],t=[],p=new Set,d=[];const T=e=>(m.push(e),()=>{const s=m.indexOf(e);m.splice(s,1)}),o=e=>(m.forEach(s=>s(e)),e),v=e=>{if(t.length>=c.max){d.push(e);return}o(e),t.unshift(e)},S=()=>{for(;d.length>0&&t.length<c.max;){const e=d.shift();e&&(o(e),t.unshift(e))}},a=e=>{const s=e.id??`toast:${P()}`,u=t.find(i=>i.id===s);return p.has(s)&&p.delete(s),u?t=t.map(i=>i.id===s?o({...i,...e,id:s}):i):v({id:s,duration:c.duration,removeDelay:c.removeDelay,type:"info",...e,stacked:!c.overlap,gap:c.gap}),s},h=e=>(p.add(e),e?(m.forEach(s=>s({id:e,dismiss:!0})),t=t.filter(s=>s.id!==e),S()):(t.forEach(s=>{m.forEach(u=>u({id:s.id,dismiss:!0}))}),t=[],d=[]),e);return{attrs:c,subscribe:T,create:a,update:(e,s)=>a({id:e,...s}),remove:h,dismiss:e=>{e!=null?t=t.map(s=>s.id===e?o({...s,message:"DISMISS"}):s):t=t.map(s=>o({...s,message:"DISMISS"}))},error:e=>a({...e,type:"error"}),success:e=>a({...e,type:"success"}),info:e=>a({...e,type:"info"}),warning:e=>a({...e,type:"warning"}),loading:e=>a({...e,type:"loading"}),getVisibleToasts:()=>t.filter(e=>!p.has(e.id)),getCount:()=>t.length,promise:(e,s,u={})=>{if(!s||!s.loading){D("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}const i=a({...u,...s.loading,promise:e,type:"loading"});let g=!0,f;const E=y(e).then(async n=>{if(f=["resolve",n],M(n)&&!n.ok){g=!1;const l=y(s.error,`HTTP Error! status: ${n.status}`);a({...u,...l,id:i,type:"error"})}else if(s.success!==void 0){g=!1;const l=y(s.success,n);a({...u,...l,id:i,type:"success"})}}).catch(async n=>{if(f=["reject",n],s.error!==void 0){g=!1;const l=y(s.error,n);a({...u,...l,id:i,type:"error"})}}).finally(()=>{var n;g&&h(i),(n=s.finally)==null||n.call(s)});return{id:i,unwrap:()=>new Promise((n,l)=>E.then(()=>f[0]==="reject"?l(f[1]):n(f[1])).catch(l))}},pause:e=>{e!=null?t=t.map(s=>s.id===e?o({...s,message:"PAUSE"}):s):t=t.map(s=>o({...s,message:"PAUSE"}))},resume:e=>{e!=null?t=t.map(s=>s.id===e?o({...s,message:"RESUME"}):s):t=t.map(s=>o({...s,message:"RESUME"}))},isVisible:e=>!p.has(e)&&!!t.find(s=>s.id===e),isDismissed:e=>p.has(e),expand:()=>{t=t.map(e=>o({...e,stacked:!0}))},collapse:()=>{t=t.map(e=>o({...e,stacked:!1}))}}}var M=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number";const U=r=>O(r),b=U({placement:"bottom-end",pauseOnPageIdle:!0}),Z=()=>{const r={duration:3e3,closable:!0};return{successToast:t=>{b.create({description:t,type:"success",...r})},errorToast:t=>{b.create({description:t,type:"error",...r})}}};export{Z as u};
