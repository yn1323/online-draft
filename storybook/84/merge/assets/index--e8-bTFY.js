import{j as e}from"./create-recipe-context-oy0ofMwS.js";import{r as d}from"./index-BXymfbzT.js";import{u as v,a as R,n as T,b as _,s as k,c as N,P as S,d as X}from"./portal-eUnN6D9k.js";import{c as A,u as z,a as V}from"./create-slot-recipe-context-ihoqZrZU.js";import{d as Z,m as ee,e as oe,f as re}from"./index-Dn30FKhp.js";import{c as $,a as u,b as te}from"./factory-DSzOyGgl.js";import{a4 as p}from"./index-D2YlXA01.js";import{C as ne}from"./theme-M2mYg1Eg.js";import{u as se}from"./use-breakpoint-BCFmA5bm.js";import{B as h}from"./box-D1Z_KUxa.js";import{H as x}from"./h-stack-e-BLBiSK.js";import{T as c}from"./text-DkCoEBoG.js";import{I as w}from"./icon-button-Bsoqtzk-.js";import{V as j}from"./v-stack-DNelLgfG.js";import{G as ie}from"./grid-CQT4z8bD.js";import{F as le}from"./flex-CXFJ85Uw.js";const ae=o=>A()(o,["defaultOpen","disabled","id","ids","lazyMount","onExitComplete","onOpenChange","open","unmountOnExit"]),de=(o={})=>{const{lazyMount:n,unmountOnExit:r,...t}=o,s=d.useId(),a=d.useRef(!1),{dir:g}=v(),{getRootNode:l}=z(),i={id:s,dir:g,getRootNode:l,...t},m=R(ee,i),f=Z(m,T);f.visible&&(a.current=!0);const Q=!f.visible&&!a.current&&n||r&&!f.visible&&a.current;return{...f,isUnmounted:Q}},[q,E]=$({name:"CollapsibleContext",hookName:"useCollapsibleContext",providerName:"<CollapsibleProvider />"}),I=d.forwardRef((o,n)=>{const[r,t]=ae(o),s=de(r),a=p(s.getRootProps(),t);return e.jsx(q,{value:s,children:e.jsx(u.div,{...a,ref:n})})});I.displayName="CollapsibleRoot";const O=d.forwardRef((o,n)=>{const r=E();if(r.isUnmounted)return null;const t=p(r.getContentProps(),o);return e.jsx(u.div,{...t,ref:n})});O.displayName="CollapsibleContent";const W=d.forwardRef((o,n)=>{const[{value:r},t]=A()(o,["value"]),s=p(r.getRootProps(),t);return e.jsx(q,{value:r,children:e.jsx(u.div,{...s,ref:n})})});W.displayName="CollapsibleRootProvider";const H=d.forwardRef((o,n)=>{const r=E(),t=p(r.getTriggerProps(),o);return e.jsx(u.button,{...t,ref:n})});H.displayName="CollapsibleTrigger";const[M,b]=$({name:"TooltipContext",hookName:"useTooltipContext",providerName:"<TooltipProvider />"}),B=d.forwardRef((o,n)=>{const r=b(),t=p(r.getArrowProps(),o);return e.jsx(u.div,{...t,ref:n})});B.displayName="TooltipArrow";const F=d.forwardRef((o,n)=>{const r=b(),t=p(r.getArrowTipProps(),o);return e.jsx(u.div,{...t,ref:n})});F.displayName="TooltipArrowTip";const G=d.forwardRef((o,n)=>{const r=b(),t=_(),s=p(r.getContentProps(),t.getPresenceProps(),o);return t.unmounted?null:e.jsx(u.div,{...s,ref:te(t.ref,n)})});G.displayName="TooltipContent";const L=d.forwardRef((o,n)=>{const r=b(),t=p(r.getPositionerProps(),o);return _().unmounted?null:e.jsx(u.div,{...t,ref:n})});L.displayName="TooltipPositioner";const ce=o=>{const n=d.useId(),{getRootNode:r}=z(),{dir:t}=v(),s={id:n,dir:t,getRootNode:r,...o},a=R(oe,s);return re(a,T)},pe=o=>{const[n,{children:r,...t}]=k(o),s=ce(t),a=N(p({present:s.open},n));return e.jsx(M,{value:s,children:e.jsx(S,{value:a,children:r})})},ue=o=>{const[n,{value:r,children:t}]=k(o),s=N(p({present:r.open},n));return e.jsx(M,{value:r,children:e.jsx(S,{value:s,children:t})})},U=d.forwardRef((o,n)=>{const r=b(),t=p(r.getTriggerProps(),o);return e.jsx(u.button,{...t,ref:n})});U.displayName="TooltipTrigger";const{withProvider:D,withContext:Y}=V({key:"collapsible"});D(W,"root",{forwardAsChild:!0});const me=D(I,"root",{forwardAsChild:!0});Y(H,"trigger",{forwardAsChild:!0});const ge=Y(O,"content",{forwardAsChild:!0}),{withRootProvider:J,withContext:C}=V({key:"tooltip"});J(ue);const fe=J(pe,{defaultProps:{lazyMount:!0,unmountOnExit:!0}}),he=C(U,"trigger",{forwardAsChild:!0}),xe=C(L,"positioner",{forwardAsChild:!0}),be=C(G,"content",{forwardAsChild:!0}),K=C(F,"arrowTip",{forwardAsChild:!0}),Ce=C(B,"arrow",{forwardAsChild:!0,defaultProps:{children:e.jsx(K,{})}}),P=d.forwardRef(function(n,r){const{showArrow:t,children:s,disabled:a,portalled:g=!0,content:l,contentProps:i,portalRef:m,...f}=n;return a?s:e.jsxs(fe,{...f,children:[e.jsx(he,{asChild:!0,children:s}),e.jsx(X,{disabled:!g,container:m,children:e.jsx(xe,{children:e.jsxs(be,{ref:r,...i,children:[t&&e.jsx(Ce,{children:e.jsx(K,{})}),l]})})})]})});try{P.displayName="Tooltip",P.__docgenInfo={description:"",displayName:"Tooltip",props:{showArrow:{defaultValue:null,description:"",name:"showArrow",required:!1,type:{name:"boolean"}},portalled:{defaultValue:null,description:"",name:"portalled",required:!1,type:{name:"boolean"}},portalRef:{defaultValue:null,description:"",name:"portalRef",required:!1,type:{name:"RefObject<HTMLElement>"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactNode"}},contentProps:{defaultValue:null,description:"",name:"contentProps",required:!1,type:{name:"TooltipContentProps"}},disabled:{defaultValue:null,description:"Whether the tooltip is disabled",name:"disabled",required:!1,type:{name:"boolean"}},recipe:{defaultValue:null,description:"",name:"recipe",required:!1,type:{name:"SlotRecipeDefinition<string, SlotRecipeVariantRecord<string>>"}}}}}catch{}const y=({round:o,participants:n,onRoundClick:r,isExpanded:t=!0,onToggleExpand:s})=>{const a=se({base:!0,md:!1}),g=ne.pastRound;return a?e.jsxs(h,{bg:"white",border:"1px solid",borderColor:g.light.borderColor,borderRadius:"lg",transition:"all 0.2s ease",_dark:{bg:"gray.800/80",borderColor:g.dark.borderColor},children:[e.jsxs(x,{justify:"space-between",align:"center",p:4,children:[e.jsx(x,{gap:2,flex:1,cursor:"pointer",onClick:s,_hover:{bg:"green.50",_dark:{bg:"green.900/40"}},borderRadius:"md",p:2,mx:-2,children:e.jsxs(c,{fontWeight:"bold",color:"green.800",fontSize:"lg",_dark:{color:"green.200"},children:["ラウンド ",o.roundNumber]})}),e.jsxs(x,{gap:1,children:[e.jsx(w,{"aria-label":"ラウンド詳細を見る",size:"sm",variant:"ghost",colorPalette:"green",onClick:l=>{l.stopPropagation(),r(o.roundNumber)},children:e.jsx(c,{fontSize:"sm",children:"✏️"})}),s&&e.jsx(w,{"aria-label":t?"詳細を閉じる":"詳細を見る",size:"sm",variant:"ghost",colorPalette:"green",onClick:l=>{l.stopPropagation(),s()},children:e.jsx(c,{fontSize:"lg",children:t?"▲":"▼"})})]})]}),e.jsx(me,{open:t,children:e.jsx(ge,{children:e.jsxs(h,{px:4,pb:4,children:[e.jsx(h,{h:"1px",bg:"green.100",mb:3,_dark:{bg:"green.800"}}),e.jsx(j,{gap:3,align:"stretch",children:n.map(l=>{const i=o.selections.find(m=>m.userId===l.id);return e.jsxs(x,{justify:"space-between",align:"center",p:2,bg:"green.25",borderRadius:"md",_dark:{bg:"green.900/20"},children:[e.jsxs(x,{gap:2,flex:1,alignItems:"center",children:[e.jsx(c,{fontSize:"lg",children:l.avatar}),e.jsx(c,{fontSize:"sm",fontWeight:"medium",color:"gray.700",_dark:{color:"gray.300"},minW:"fit-content",children:l.name})]}),e.jsx(h,{flex:2,textAlign:"right",children:i?e.jsxs(j,{gap:1,align:"flex-end",children:[e.jsx(c,{fontSize:"sm",fontWeight:"bold",color:"gray.800",_dark:{color:"gray.200"},lineHeight:"1.2",wordBreak:"break-all",children:i.item}),i.comment&&e.jsx(c,{fontSize:"xs",color:"green.600",fontStyle:"italic",_dark:{color:"green.300"},lineHeight:"1.2",children:i.comment})]}):e.jsx(c,{fontSize:"sm",color:"gray.400",fontWeight:"medium",_dark:{color:"gray.500"},children:"未参加"})})]},l.id)})})]})})})]}):e.jsxs(ie,{templateColumns:`60px repeat(${n.length}, 1fr)`,gap:3,p:3,bg:"white",border:"1px solid",borderColor:"green.200",borderRadius:"lg",transition:"all 0.2s ease",cursor:"pointer",onClick:()=>r(o.roundNumber),_hover:{bg:"green.50",borderColor:"green.300",transform:"translateY(-1px)",boxShadow:"0 4px 12px -4px rgba(34, 197, 94, 0.15)"},_dark:{bg:"gray.800/80",borderColor:"green.700",_hover:{bg:"green.900/40",borderColor:"green.600",boxShadow:"0 4px 12px -4px rgba(34, 197, 94, 0.25)"}},alignItems:"center",children:[e.jsx(le,{align:"center",justify:"center",h:"full",children:e.jsx(c,{fontWeight:"bold",color:"green.800",fontSize:"lg",_dark:{color:"green.200"},children:o.roundNumber})}),n.map(l=>{const i=o.selections.find(m=>m.userId===l.id);return e.jsx(h,{textAlign:"center",px:1,children:i?e.jsxs(j,{gap:.5,children:[e.jsx(P,{content:i.item,disabled:i.item.length<=6,children:e.jsx(c,{fontSize:"sm",fontWeight:"bold",color:"gray.800",lineHeight:"1.2",_dark:{color:"gray.200"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"help",children:i.item.length>6?`${i.item.slice(0,6)}...`:i.item})}),i.comment&&e.jsx(P,{content:i.comment,disabled:i.comment.length<=8,children:e.jsx(c,{fontSize:"xs",color:"green.600",fontStyle:"italic",lineHeight:"1.2",_dark:{color:"green.300"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"help",children:i.comment.length>8?`${i.comment.slice(0,8)}...`:i.comment})})]}):e.jsx(c,{fontSize:"sm",color:"gray.400",fontWeight:"medium",_dark:{color:"gray.500"},children:"未参加"})},l.id)})]})};try{y.displayName="PastRoundRow",y.__docgenInfo={description:"",displayName:"PastRoundRow",props:{round:{defaultValue:null,description:"",name:"round",required:!0,type:{name:"{ roundNumber: number; topic: string; selections: { userId: string; userName: string; item: string; comment?: string | undefined; }[]; }"}},participants:{defaultValue:null,description:"",name:"participants",required:!0,type:{name:'{ id: string; name: string; avatar: string; status: "thinking" | "entered" | "completed"; }[]'}},onRoundClick:{defaultValue:null,description:"",name:"onRoundClick",required:!0,type:{name:"(roundNumber: number) => void"}},isExpanded:{defaultValue:{value:"true"},description:"",name:"isExpanded",required:!1,type:{name:"boolean"}},onToggleExpand:{defaultValue:null,description:"",name:"onToggleExpand",required:!1,type:{name:"(() => void)"}}}}}catch{}export{y as P};
