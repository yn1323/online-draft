import{j as e}from"./stack-C7hvTRfV.js";import{u as B,a as E,o as D,s as w}from"./schemas-CUQ-9AXQ.js";import{r as C}from"./index-BXymfbzT.js";import{A as I}from"./index-BacWYqUV.js";import{I as M}from"./index-T8rPnJJ1.js";import{R as N}from"./responsive-modal-COX6Whib.js";import{V as g}from"./v-stack-3HiezQxF.js";import{T as i}from"./text-CD52-QEU.js";import{S as V}from"./simple-grid-BtvhO84w.js";import{B as c}from"./box-DfzLPJuh.js";const z=D({userName:w().min(1,"名前を入力してください").max(20,"ユーザー名は20文字以内で入力してください").trim()}),x=({isOpen:r,onClose:s,onConfirm:l,usedAvatars:a=[]})=>{const[n,u]=C.useState(""),{register:S,handleSubmit:y,formState:{errors:d,isValid:A,isSubmitting:v},reset:m}=B({resolver:E(z),mode:"onChange",defaultValues:{userName:""}}),b=Array.from({length:18},(t,o)=>(o+1).toString()),j=async t=>{n&&(await l({name:t.userName,avatar:n}),m(),u(""))},p=()=>{m(),u(""),s()},_=t=>a.includes(t),F=n&&A;return e.jsxs(N,{isOpen:r,onClose:p,title:"ドラフトに参加",actions:{cancel:{text:"キャンセル",onClick:p},submit:{text:"登録する",disabled:!F,loading:v,onClick:y(j)}},children:[e.jsxs(g,{gap:2,align:"start",w:"full",children:[e.jsx(i,{fontSize:["sm","md"],fontWeight:"bold",color:"gray.700",children:"あなたの名前"}),e.jsx(M,{...S("userName"),placeholder:"名前を入力してください",maxLength:20,size:"lg",error:!!d.userName}),d.userName&&e.jsx(i,{fontSize:"sm",color:"red.500",children:d.userName.message})]}),e.jsxs(g,{gap:4,align:"start",w:"full",children:[e.jsx(i,{fontSize:["sm","md"],fontWeight:"bold",color:"gray.700",children:"アバターを選択"}),e.jsx(V,{columns:[4,6],gap:3,w:"full",children:b.map(t=>{const o=_(t),f=n===t;return e.jsxs(c,{position:"relative",cursor:o?"not-allowed":"pointer",opacity:o?.4:1,onClick:()=>!o&&u(t),children:[e.jsx(c,{p:.5,borderRadius:"lg",border:"2px solid",borderColor:f?"blue.400":o?"gray.300":"gray.200",bg:f?"blue.50":"white",transition:"all 0.15s",display:"flex",alignItems:"center",justifyContent:"center",_hover:o?{}:{borderColor:"blue.400",transform:"scale(1.05)"},children:e.jsx(I,{avatarNumber:t,size:"md",noBorder:!0})}),o&&e.jsx(c,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"red.500",color:"white",borderRadius:"full",w:"20px",h:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",fontWeight:"bold",children:"×"})]},t)})}),e.jsx(i,{fontSize:"xs",color:"gray.500",children:"×マークは他の参加者が使用中のアバターです"})]})]})},h=()=>{const[r,s]=C.useState(!1),l=()=>s(!0),a=()=>s(!1);return{isOpen:r,open:l,close:a,modalProps:{isOpen:r,onClose:a}}};try{x.displayName="AvatarSelectionModal",x.__docgenInfo={description:`アバター選択モーダル
新規参加者用のアバター・名前選択UI`,displayName:"AvatarSelectionModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"(userData: { name: string; avatar: string; }) => void | Promise<void>"}},usedAvatars:{defaultValue:{value:"[]"},description:"",name:"usedAvatars",required:!1,type:{name:"string[]"}}}}}catch{}try{h.displayName="useAvatarSelectionModal",h.__docgenInfo={description:`AvatarSelectionModal用カスタムフック
他のモーダルと同じパターンで開閉制御を提供`,displayName:"useAvatarSelectionModal",props:{}}}catch{}export{x as A};
