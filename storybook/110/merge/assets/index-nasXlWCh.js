import{j as e}from"./create-recipe-context-LbQq3bM7.js";import{C as I}from"./theme-BEsXwnFK.js";import{u as V}from"./use-breakpoint-CtC0MXDZ.js";import{B as m}from"./box-p2MKwv57.js";import{H as u}from"./h-stack-BOuMwgNM.js";import{T as i}from"./text-BOFVnBsW.js";import{I as C}from"./icon-button-Bwmz2JOC.js";import{V as h}from"./v-stack-DfIdlA7P.js";import{G as E}from"./grid-DCXQ59mM.js";import{F as H}from"./flex-CZZAfvJj.js";import{d as y,a as O,u as W,b as T,n as q,c as A}from"./create-slot-recipe-context-9ZU4Gcb9.js";import{r as p}from"./index-BXymfbzT.js";import{c as M,a as f}from"./factory-OeC611uy.js";import{c as B,m as $}from"./index-BumpzSCx.js";import{D as b}from"./index-B1VjsNl3.js";const U=r=>y()(r,["defaultOpen","disabled","id","ids","lazyMount","onExitComplete","onOpenChange","open","unmountOnExit"]),F=(r={})=>{const{lazyMount:n,unmountOnExit:l,...s}=r,a=p.useId(),c=p.useRef(!1),{dir:x}=O(),{getRootNode:g}=W(),t={id:a,dir:x,getRootNode:g,...s},o=T($,t),d=B(o,q);d.visible&&(c.current=!0);const z=!d.visible&&!c.current&&n||l&&!d.visible&&c.current;return{...d,isUnmounted:z}},[k,v]=M({name:"CollapsibleContext",hookName:"useCollapsibleContext",providerName:"<CollapsibleProvider />"}),P=p.forwardRef((r,n)=>{const[l,s]=U(r),a=F(l),c=b(a.getRootProps(),s);return e.jsx(k,{value:a,children:e.jsx(f.div,{...c,ref:n})})});P.displayName="CollapsibleRoot";const R=p.forwardRef((r,n)=>{const l=v();if(l.isUnmounted)return null;const s=b(l.getContentProps(),r);return e.jsx(f.div,{...s,ref:n})});R.displayName="CollapsibleContent";const _=p.forwardRef((r,n)=>{const[{value:l},s]=y()(r,["value"]),a=b(l.getRootProps(),s);return e.jsx(k,{value:l,children:e.jsx(f.div,{...a,ref:n})})});_.displayName="CollapsibleRootProvider";const w=p.forwardRef((r,n)=>{const l=v(),s=b(l.getTriggerProps(),r);return e.jsx(f.button,{...s,ref:n})});w.displayName="CollapsibleTrigger";const{withProvider:S,withContext:N}=A({key:"collapsible"});S(_,"root",{forwardAsChild:!0});const G=S(P,"root",{forwardAsChild:!0});N(w,"trigger",{forwardAsChild:!0});const Y=N(R,"content",{forwardAsChild:!0}),j=({round:r,participants:n,onRoundClick:l,onUserClick:s,isExpanded:a=!0,onToggleExpand:c})=>{const x=V({base:!0,md:!1}),g=I.pastRound;return x?e.jsxs(m,{bg:"white",border:"1px solid",borderColor:g.light.borderColor,borderRadius:"lg",transition:"all 0.2s ease",_dark:{bg:"gray.800/80",borderColor:g.dark.borderColor},children:[e.jsxs(u,{justify:"space-between",align:"center",p:4,children:[e.jsx(u,{gap:2,flex:1,cursor:"pointer",onClick:c,_hover:{bg:"green.50",_dark:{bg:"green.900/40"}},borderRadius:"md",p:2,mx:-2,children:e.jsxs(i,{fontWeight:"bold",color:"green.800",fontSize:"lg",_dark:{color:"green.200"},children:["ラウンド ",r.roundNumber]})}),e.jsxs(u,{gap:1,children:[e.jsx(C,{"aria-label":"ラウンド詳細を見る",size:"sm",variant:"ghost",colorPalette:"green",onClick:t=>{t.stopPropagation(),l(r.roundNumber)},children:e.jsx(i,{fontSize:"sm",children:"✏️"})}),c&&e.jsx(C,{"aria-label":a?"詳細を閉じる":"詳細を見る",size:"sm",variant:"ghost",colorPalette:"green",onClick:t=>{t.stopPropagation(),c()},children:e.jsx(i,{fontSize:"lg",children:a?"▲":"▼"})})]})]}),e.jsx(G,{open:a,children:e.jsx(Y,{children:e.jsxs(m,{px:4,pb:4,children:[e.jsx(m,{h:"1px",bg:"green.100",mb:3,_dark:{bg:"green.800"}}),e.jsx(h,{gap:3,align:"stretch",children:n.map(t=>{const o=r.selections.find(d=>d.userId===t.id);return e.jsxs(u,{justify:"space-between",align:"center",p:2,bg:"green.25",borderRadius:"md",cursor:"pointer",transition:"all 0.2s ease",onClick:()=>s(r.roundNumber,t.id),_hover:{bg:"green.100",transform:"translateY(-1px)",_dark:{bg:"green.800/40"}},_dark:{bg:"green.900/20"},children:[e.jsxs(u,{gap:2,flex:1,alignItems:"center",children:[e.jsx(i,{fontSize:"lg",children:t.avatar}),e.jsx(i,{fontSize:"sm",fontWeight:"medium",color:"gray.700",_dark:{color:"gray.300"},minW:"fit-content",children:t.name})]}),e.jsx(m,{flex:2,textAlign:"right",children:o?e.jsxs(h,{gap:1,align:"flex-end",children:[e.jsx(i,{fontSize:"sm",fontWeight:"bold",color:"gray.800",_dark:{color:"gray.200"},lineHeight:"1.2",wordBreak:"break-all",children:o.item}),o.comment&&e.jsx(i,{fontSize:"xs",color:"green.600",fontStyle:"italic",_dark:{color:"green.300"},lineHeight:"1.2",children:o.comment})]}):e.jsx(i,{fontSize:"sm",color:"gray.400",fontWeight:"medium",_dark:{color:"gray.500"},children:"未参加"})})]},t.id)})})]})})})]}):e.jsxs(E,{templateColumns:`60px repeat(${n.length}, 1fr)`,gap:3,p:3,bg:"white",border:"1px solid",borderColor:"green.200",borderRadius:"lg",transition:"all 0.2s ease",_dark:{bg:"gray.800/80",borderColor:"green.700"},alignItems:"center",children:[e.jsx(H,{align:"center",justify:"center",h:"full",children:e.jsx(i,{fontWeight:"bold",color:"green.800",fontSize:"lg",_dark:{color:"green.200"},children:r.roundNumber})}),n.map(t=>{const o=r.selections.find(d=>d.userId===t.id);return e.jsx(m,{textAlign:"center",px:1,cursor:"pointer",borderRadius:"md",transition:"all 0.2s ease",onClick:d=>{d.stopPropagation(),s(r.roundNumber,t.id)},_hover:{bg:"green.50",transform:"translateY(-1px)",_dark:{bg:"green.900/40"}},p:2,mx:-1,children:o?e.jsxs(h,{gap:.5,minH:"44px",justify:"center",children:[e.jsx(i,{fontSize:"sm",fontWeight:"bold",color:"gray.800",lineHeight:"1.2",_dark:{color:"gray.200"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:o.item.length>6?`${o.item.slice(0,6)}...`:o.item}),e.jsx(i,{fontSize:"xs",color:"green.600",fontStyle:"italic",lineHeight:"1.2",_dark:{color:"green.300"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",opacity:o.comment?1:0,children:o.comment?o.comment.length>8?`${o.comment.slice(0,8)}...`:o.comment:"placeholder"})]}):e.jsx(m,{minH:"44px",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(i,{fontSize:"sm",color:"gray.400",fontWeight:"medium",_dark:{color:"gray.500"},children:"未参加"})})},t.id)})]})};try{j.displayName="PastRoundRow",j.__docgenInfo={description:"",displayName:"PastRoundRow",props:{round:{defaultValue:null,description:"",name:"round",required:!0,type:{name:"{ roundNumber: number; topic: string; selections: { userId: string; userName: string; item: string; comment?: string | undefined; }[]; }"}},participants:{defaultValue:null,description:"",name:"participants",required:!0,type:{name:'{ id: string; name: string; avatar: string; status: "thinking" | "entered" | "completed"; }[]'}},onRoundClick:{defaultValue:null,description:"",name:"onRoundClick",required:!0,type:{name:"(roundNumber: number) => void"}},onUserClick:{defaultValue:null,description:"",name:"onUserClick",required:!0,type:{name:"(roundNumber: number, userId: string) => void"}},isExpanded:{defaultValue:{value:"true"},description:"",name:"isExpanded",required:!1,type:{name:"boolean"}},onToggleExpand:{defaultValue:null,description:"",name:"onToggleExpand",required:!1,type:{name:"(() => void)"}}}}}catch{}export{j as P};
