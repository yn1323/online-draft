import{c as k}from"./index-BRNWFSEf.js";import{L as h,c as I,r as v,a as C,N as b,m as y,O as N}from"./index-By25cWhp.js";import{c as S}from"./index-CrjboX4Z.js";var z=k("collapsible").parts("root","trigger","content","indicator"),m=z.build(),x=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`collapsible:${e.id}`},O=e=>{var t;return((t=e.ids)==null?void 0:t.content)??`collapsible:${e.id}:content`},A=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`collapsible:${e.id}:trigger`},g=e=>e.getById(O(e));function $(e,t){const{state:n,send:s,context:o,scope:i,prop:l}=e,a=n.matches("open")||n.matches("closing"),r=n.matches("open"),{width:c,height:u}=o.get("size"),d=!!l("disabled"),E=!o.get("initial")&&r,f="ltr";return{disabled:d,visible:a,open:r,measureSize(){s({type:"size.measure"})},setOpen(p){n.matches("open")!==p&&s({type:p?"open":"close"})},getRootProps(){return t.element({...m.root.attrs,"data-state":r?"open":"closed",dir:f,id:x(i)})},getContentProps(){return t.element({...m.content.attrs,"data-collapsible":"","data-state":E?void 0:r?"open":"closed",id:O(i),"data-disabled":h(d),hidden:!a,style:{"--height":u!=null?`${u}px`:void 0,"--width":c!=null?`${c}px`:void 0}})},getTriggerProps(){return t.element({...m.trigger.attrs,id:A(i),dir:f,type:"button","data-state":r?"open":"closed","data-disabled":h(d),"aria-controls":O(i),"aria-expanded":a||!1,onClick(p){p.defaultPrevented||d||s({type:r?"close":"open"})}})},getIndicatorProps(){return t.element({...m.indicator.attrs,dir:f,"data-state":r?"open":"closed","data-disabled":h(d)})}}}var T=I({initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{size:e(()=>({defaultValue:{height:0,width:0},sync:!0})),initial:e(()=>({defaultValue:!1}))}},refs(){return{cleanup:void 0,stylesRef:void 0}},watch({track:e,prop:t,action:n}){e([()=>t("open")],()=>{n(["setInitial","computeSize","toggleVisibility"])})},exit:["clearInitial","cleanupNode"],states:{closed:{on:{"controlled.open":{target:"open"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitial","computeSize","invokeOnOpen"]}]}},closing:{effects:["trackExitAnimation"],on:{"controlled.close":{target:"closed"},"controlled.open":{target:"open"},open:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitial","invokeOnOpen"]}],close:[{guard:"isOpenControlled",actions:["invokeOnExitComplete"]},{target:"closed",actions:["setInitial","computeSize","invokeOnExitComplete"]}],"animation.end":{target:"closed",actions:["invokeOnExitComplete","clearInitial"]}}},open:{effects:["trackEnterAnimation"],on:{"controlled.close":{target:"closing"},close:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closing",actions:["setInitial","computeSize","invokeOnClose"]}],"size.measure":{actions:["measureSize"]},"animation.end":{actions:["clearInitial"]}}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackEnterAnimation:({send:e,scope:t})=>{let n;const s=v(()=>{const o=g(t);if(!o)return;const i=C(o).animationName;if(!i||i==="none"){e({type:"animation.end"});return}const a=r=>{y(r)===o&&e({type:"animation.end"})};o.addEventListener("animationend",a),n=()=>{o.removeEventListener("animationend",a)}});return()=>{s(),n==null||n()}},trackExitAnimation:({send:e,scope:t})=>{let n;const s=v(()=>{const o=g(t);if(!o)return;const i=C(o).animationName;if(!i||i==="none"){e({type:"animation.end"});return}const a=c=>{y(c)===o&&e({type:"animation.end"})};o.addEventListener("animationend",a);const r=b(o,{animationFillMode:"forwards"});n=()=>{o.removeEventListener("animationend",a),N(()=>r())}});return()=>{s(),n==null||n()}}},actions:{setInitial:({context:e,flush:t})=>{t(()=>{e.set("initial",!0)})},clearInitial:({context:e})=>{e.set("initial",!1)},cleanupNode:({refs:e})=>{e.set("stylesRef",null)},measureSize:({context:e,scope:t})=>{const n=g(t);if(!n)return;const{height:s,width:o}=n.getBoundingClientRect();e.set("size",{height:s,width:o})},computeSize:({refs:e,scope:t,context:n})=>{var o;(o=e.get("cleanup"))==null||o();const s=v(()=>{const i=g(t);if(!i)return;const l=i.hidden;i.style.animationName="none",i.style.animationDuration="0s",i.hidden=!1;const a=i.getBoundingClientRect();n.set("size",{height:a.height,width:a.width}),n.get("initial")&&(i.style.animationName="",i.style.animationDuration=""),i.hidden=l});e.set("cleanup",s)},invokeOnOpen:({prop:e})=>{var t;(t=e("onOpenChange"))==null||t({open:!0})},invokeOnClose:({prop:e})=>{var t;(t=e("onOpenChange"))==null||t({open:!1})},invokeOnExitComplete:({prop:e})=>{var t;(t=e("onExitComplete"))==null||t()},toggleVisibility:({prop:e,send:t})=>{t({type:e("open")?"controlled.open":"controlled.close"})}}}});S()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","defaultOpen","open"]);export{z as a,$ as c,T as m};
