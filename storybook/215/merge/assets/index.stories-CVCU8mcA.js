import{j as r,c as Ke,f as Xe,m as Je}from"./stack-C7hvTRfV.js";import{u as M,b as U,c as H,a as X,g as $,s as J}from"./states-Bd1A8IJM.js";import{B as Y}from"./index-BDjo72mV.js";import{L as Qe}from"./index-CiufUkL-.js";import{d as Se}from"./common-BLnyBYBx.js";import{q as Ye,o as Ze,w as Z,c as et,a as Ae,d as tt}from"./index.esm-sDRqfWCZ.js";import{r as d}from"./index-BXymfbzT.js";import{u as st,a as rt}from"./useRealtimeUsers-BjBKvw7m.js";import{u as D,a as A}from"./react-BSHoCbAh.js";import{u as ot}from"./index-yHYUIvBd.js";import{u as at}from"./useGroup-KG1GXQvu.js";import{b as ee,c as nt,d as it}from"./index-ByYvEZYI.js";import{C as te}from"./index-ojvpMEK-.js";import{C as se}from"./index-xRC8xhfB.js";import{C as re}from"./index-DSJvkbN5.js";import{u as ut,I as oe}from"./index-B9SXKs5y.js";import{u as ct,O as ae}from"./index-CWfwzoqI.js";import{u as lt,S as ne}from"./index-BGaq2gXr.js";import{u as dt,S as ie}from"./index-BlZRLquw.js";import{P as ue}from"./index-vzaBxmxJ.js";import{u as mt}from"./use-breakpoint-Bx2dcQer.js";import{V as q}from"./v-stack-3HiezQxF.js";import{B as I}from"./box-DfzLPJuh.js";import{H as j}from"./h-stack-BRlU4uQg.js";import{T}from"./text-CD52-QEU.js";import{C as je}from"./container-bF68x0Ww.js";import{G as pt}from"./grid-BguLyDGn.js";import{c as ft}from"./create-slot-recipe-context-Ct6br2V7.js";import{c as W,u as gt,a as ht,b as vt,n as bt}from"./index-PsSrZQde.js";import{u as xt,s as we,R as Pe}from"./render-strategy-F9cfH0Wk.js";import{c as yt,a as E,b as Ct}from"./factory-hxkYGFqN.js";import{c as It}from"./index-BgxHbLYw.js";import{I as F,J as R,K as Tt,E as Rt,L as St,H as At,N as jt,o as wt,O as Pt,P as Et,u as Ft,r as w,Q as Vt,R as Nt,S as Ot,x as Bt,T as _t,q as Lt}from"./index-CzEkc76M.js";import{p as Dt,q as kt}from"./index-ytcWRJ8V.js";import{c as Q}from"./index-CrjboX4Z.js";import{u as Mt,P as Ut}from"./responsive-modal-COX6Whib.js";import{u as Ht}from"./utils-CKwsSTjv.js";import"./jsx-runtime-Bw5QeaCk.js";import"./button-B54MzPQk.js";import"./attr-C3Jtgmrz.js";import"./spinner-Dzu03cyn.js";import"./index-C0w2AICy.js";import"./_interop_require_wildcard-BpaVepTj.js";import"./index-T8rPnJJ1.js";import"./useChat-lt3vafa7.js";import"./index-BacWYqUV.js";import"./index-DGKHe-6Q.js";import"./image-context-B4PdNff0.js";import"./index-B7ziaFbE.js";import"./index-CYsJy3kW.js";import"./card-Dcz0m3mf.js";import"./schemas-KUTtO3HA.js";import"./core-Bf_Kmm7K.js";import"./useModal-IzikcFvB.js";import"./toaster-fCX_dEN1.js";import"./icon-button-CtLJGKtt.js";import"./index-LBKxmenO.js";import"./index-R6MWo6e9.js";import"./index-CJlWB-WU.js";function $t(e,t){const[o,s]=d.useState(e);return d.useEffect(()=>{const n=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(n)}},[e,t]),o}const[Ee,z]=yt({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),Fe=d.forwardRef((e,t)=>{const[o,s]=W()(e,["value"]),n=z(),a=xt(),u=Mt({...a,present:$t(n.value===e.value,0),immediate:!0}),f=F(n.getContentProps(o),u.getPresenceProps(),s);return r.jsx(Ut,{value:u,children:u.unmounted?null:r.jsx(E.div,{...f,ref:Ct(u.ref,t)})})});Fe.displayName="TabContent";const Ve=d.forwardRef((e,t)=>{const o=z(),s=F(o.getIndicatorProps(),e);return r.jsx(E.div,{...s,ref:t})});Ve.displayName="TabIndicator";const Ne=d.forwardRef((e,t)=>{const o=z(),s=F(o.getListProps(),e);return r.jsx(E.div,{...s,ref:t})});Ne.displayName="TabList";const Oe=d.forwardRef((e,t)=>{const[o,s]=W()(e,["disabled","value"]),n=z(),a=F(n.getTriggerProps(o),s);return r.jsx(E.button,{...a,ref:t})});Oe.displayName="TabTrigger";var Wt=It("tabs").parts("root","list","trigger","content","indicator"),V=Wt.build(),zt=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`tabs:${e.id}`},B=e=>{var t;return((t=e.ids)==null?void 0:t.list)??`tabs:${e.id}:list`},K=(e,t)=>{var o;return((o=e.ids)==null?void 0:o.content)??`tabs:${e.id}:content-${t}`},S=(e,t)=>{var o;return((o=e.ids)==null?void 0:o.trigger)??`tabs:${e.id}:trigger-${t}`},Be=e=>{var t;return((t=e.ids)==null?void 0:t.indicator)??`tabs:${e.id}:indicator`},Gt=e=>e.getById(B(e)),qt=(e,t)=>e.getById(K(e,t)),k=(e,t)=>e.getById(S(e,t)),ce=e=>e.getById(Be(e)),_=e=>{const o=`[role=tab][data-ownedby='${CSS.escape(B(e))}']:not([disabled])`;return Lt(Gt(e),o)},Kt=e=>kt(_(e)),Xt=e=>Dt(_(e)),Jt=(e,t)=>Ot(_(e),S(e,t.value),t.loopFocus),Qt=(e,t)=>Nt(_(e),S(e,t.value),t.loopFocus),_e=e=>({left:(e==null?void 0:e.offsetLeft)??0,top:(e==null?void 0:e.offsetTop)??0,width:(e==null?void 0:e.offsetWidth)??0,height:(e==null?void 0:e.offsetHeight)??0}),Yt=(e,t)=>{const o=_t(_(e),S(e,t));return Le(_e(o))},Le=e=>({width:`${e.width}px`,height:`${e.height}px`,left:`${e.left}px`,top:`${e.top}px`});function Zt(e,t){const{state:o,send:s,context:n,prop:a,scope:u}=e,f=a("translations"),m=o.matches("focused"),g=a("orientation")==="vertical",x=a("orientation")==="horizontal",h=a("composite");function v(i){return{selected:n.get("value")===i.value,focused:n.get("focusedValue")===i.value,disabled:!!i.disabled}}return{value:n.get("value"),focusedValue:n.get("focusedValue"),setValue(i){s({type:"SET_VALUE",value:i})},clearValue(){s({type:"CLEAR_VALUE"})},setIndicatorRect(i){const c=S(u,i);s({type:"SET_INDICATOR_RECT",id:c})},syncTabIndex(){s({type:"SYNC_TAB_INDEX"})},selectNext(i){s({type:"TAB_FOCUS",value:i,src:"selectNext"}),s({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(i){s({type:"TAB_FOCUS",value:i,src:"selectPrev"}),s({type:"ARROW_PREV",src:"selectPrev"})},focus(){var c;const i=n.get("value");i&&((c=k(u,i))==null||c.focus())},getRootProps(){return t.element({...V.root.attrs,id:zt(u),"data-orientation":a("orientation"),"data-focus":R(m),dir:a("dir")})},getListProps(){return t.element({...V.list.attrs,id:B(u),role:"tablist",dir:a("dir"),"data-focus":R(m),"aria-orientation":a("orientation"),"data-orientation":a("orientation"),"aria-label":f==null?void 0:f.listLabel,onKeyDown(i){if(i.defaultPrevented||!St(i)||At(i))return;const c={ArrowDown(){x||s({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){x||s({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){g||s({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){g||s({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){s({type:"HOME"})},End(){s({type:"END"})}};let y=jt(i,{dir:a("dir"),orientation:a("orientation")});const l=c[y];if(l){i.preventDefault(),l(i);return}}})},getTriggerState:v,getTriggerProps(i){const{value:c,disabled:y}=i,l=v(i);return t.button({...V.trigger.attrs,role:"tab",type:"button",disabled:y,dir:a("dir"),"data-orientation":a("orientation"),"data-disabled":R(y),"aria-disabled":y,"data-value":c,"aria-selected":l.selected,"data-selected":R(l.selected),"data-focus":R(l.focused),"aria-controls":l.selected?K(u,c):void 0,"data-ownedby":B(u),"data-ssr":R(n.get("ssr")),id:S(u,c),tabIndex:l.selected&&h?0:-1,onFocus(){s({type:"TAB_FOCUS",value:c})},onBlur(b){const p=b.relatedTarget;(p==null?void 0:p.getAttribute("role"))!=="tab"&&s({type:"TAB_BLUR"})},onClick(b){b.defaultPrevented||Tt(b)||y||(Rt()&&b.currentTarget.focus(),s({type:"TAB_CLICK",value:c}))}})},getContentProps(i){const{value:c}=i,y=n.get("value")===c;return t.element({...V.content.attrs,dir:a("dir"),id:K(u,c),tabIndex:h?0:-1,"aria-labelledby":S(u,c),role:"tabpanel","data-ownedby":B(u),"data-selected":R(y),"data-orientation":a("orientation"),hidden:!y})},getIndicatorProps(){const i=n.get("indicatorRect"),c=n.get("indicatorTransition");return t.element({id:Be(u),...V.indicator.attrs,dir:a("dir"),"data-orientation":a("orientation"),style:{"--transition-property":"left, right, top, bottom, width, height","--left":i.left,"--top":i.top,"--width":i.width,"--height":i.height,position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:c?"var(--transition-duration, 150ms)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",[x?"left":"top"]:x?"var(--left)":"var(--top)"}})}}}var{createMachine:es}=wt(),ts=es({props({props:e}){return{dir:"ltr",orientation:"horizontal",activationMode:"automatic",loopFocus:!0,composite:!0,navigate(t){Bt(t.node)},defaultValue:null,...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(o){var s;(s=e("onValueChange"))==null||s({value:o})}})),focusedValue:t(()=>({defaultValue:e("value")||e("defaultValue"),sync:!0,onChange(o){var s;(s=e("onFocusChange"))==null||s({focusedValue:o})}})),ssr:t(()=>({defaultValue:!0})),indicatorTransition:t(()=>({defaultValue:!1})),indicatorRect:t(()=>({defaultValue:{left:"0px",top:"0px",width:"0px",height:"0px"}}))}},watch({context:e,prop:t,track:o,action:s}){o([()=>e.get("value")],()=>{s(["allowIndicatorTransition","syncIndicatorRect","syncTabIndex","navigateIfNeeded"])}),o([()=>t("dir"),()=>t("orientation")],()=>{s(["syncIndicatorRect"])})},on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]},SET_INDICATOR_RECT:{actions:["setIndicatorRect"]},SYNC_TAB_INDEX:{actions:["syncTabIndex"]}},entry:["syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:["setFocusedValue"]},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:["focusPrevTab"]}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:["focusNextTab"]}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:["focusFirstTab"]}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:["focusLastTab"]}],TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:["clearFocusedValue"]}}}},implementations:{guards:{selectOnFocus:({prop:e})=>e("activationMode")==="automatic"},actions:{selectFocusedTab({context:e,prop:t}){w(()=>{const o=e.get("focusedValue");if(!o)return;const n=t("deselectable")&&e.get("value")===o?null:o;e.set("value",n)})},setFocusedValue({context:e,event:t,flush:o}){t.value!=null&&o(()=>{e.set("focusedValue",t.value)})},clearFocusedValue({context:e}){e.set("focusedValue",null)},setValue({context:e,event:t,prop:o}){const s=o("deselectable")&&e.get("value")===e.get("focusedValue");e.set("value",s?null:t.value)},clearValue({context:e}){e.set("value",null)},focusFirstTab({scope:e}){w(()=>{var t;(t=Kt(e))==null||t.focus()})},focusLastTab({scope:e}){w(()=>{var t;(t=Xt(e))==null||t.focus()})},focusNextTab({context:e,prop:t,scope:o,event:s}){const n=s.value??e.get("focusedValue");if(!n)return;const a=Jt(o,{value:n,loopFocus:t("loopFocus")});w(()=>{t("composite")?a==null||a.focus():(a==null?void 0:a.dataset.value)!=null&&e.set("focusedValue",a.dataset.value)})},focusPrevTab({context:e,prop:t,scope:o,event:s}){const n=s.value??e.get("focusedValue");if(!n)return;const a=Qt(o,{value:n,loopFocus:t("loopFocus")});w(()=>{t("composite")?a==null||a.focus():(a==null?void 0:a.dataset.value)!=null&&e.set("focusedValue",a.dataset.value)})},syncTabIndex({context:e,scope:t}){w(()=>{const o=e.get("value");if(!o)return;const s=qt(t,o);if(!s)return;Vt(s).length>0?s.removeAttribute("tabindex"):s.setAttribute("tabindex","0")})},cleanupObserver({refs:e}){const t=e.get("indicatorCleanup");t&&t()},allowIndicatorTransition({context:e}){e.set("indicatorTransition",!0)},setIndicatorRect({context:e,event:t,scope:o}){const s=t.id??e.get("value");if(!ce(o))return;if(!s){e.set("indicatorTransition",!1);return}k(o,s)&&(e.set("indicatorRect",Yt(o,s)),Ft(()=>{e.set("indicatorTransition",!1)}))},syncSsr({context:e}){e.set("ssr",!1)},syncIndicatorRect({context:e,refs:t,scope:o}){const s=t.get("indicatorCleanup");s&&s();const n=e.get("value");if(!n){e.set("indicatorTransition",!1);return}const a=k(o,n),u=ce(o);if(!a||!u)return;const f=Et([a],{measure(m){return _e(m)},onEntry({rects:m}){const[g]=m;e.set("indicatorRect",Le(g))}});t.set("indicatorCleanup",f)},navigateIfNeeded({context:e,prop:t,scope:o}){var a;const s=e.get("value");if(!s)return;const n=k(o,s);Pt(n)&&((a=t("navigate"))==null||a({value:s,node:n,href:n.href}))}}}});Q()(["activationMode","composite","deselectable","dir","getRootNode","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value","defaultValue"]);Q()(["disabled","value"]);Q()(["value"]);const ss=e=>{const t=d.useId(),{getRootNode:o}=gt(),{dir:s}=ht(),n={id:t,dir:s,getRootNode:o,...e},a=vt(ts,n);return Zt(a,bt)},De=d.forwardRef((e,t)=>{const[o,s]=we(e),[n,a]=W()(s,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","navigate","onFocusChange","onValueChange","orientation","translations","value"]),u=ss(n),f=F(u.getRootProps(),a);return r.jsx(Ee,{value:u,children:r.jsx(Pe,{value:o,children:r.jsx(E.div,{...f,ref:t})})})});De.displayName="TabsRoot";const ke=d.forwardRef((e,t)=>{const[o,s]=we(e),[{value:n},a]=W()(s,["value"]),u=F(n.getRootProps(),a);return r.jsx(Ee,{value:n,children:r.jsx(Pe,{value:o,children:r.jsx(E.div,{...u,ref:t})})})});ke.displayName="TabsRootProvider";function le(e){return Je(e,t=>t==="auto"?"auto":`span ${t}/span ${t}`)}const de=d.forwardRef(function(t,o){const{area:s,colSpan:n,colStart:a,colEnd:u,rowEnd:f,rowSpan:m,rowStart:g,...x}=t,h=Ke({gridArea:s,gridColumn:le(n),gridRow:le(m),gridColumnStart:a,gridColumnEnd:u,gridRowStart:g,gridRowEnd:f});return r.jsx(Xe.div,{ref:o,css:h,...x})}),{withProvider:Me,withContext:L}=ft({key:"tabs"});Me(ke,"root",{forwardAsChild:!0});const rs=Me(De,"root",{forwardAsChild:!0}),me=L(Oe,"trigger",{forwardAsChild:!0}),pe=L(Fe,"content",{forwardAsChild:!0});L("div","contentGroup");const os=L(Ne,"list",{forwardAsChild:!0});L(Ve,"indicator",{forwardAsChild:!0});const as=[{id:"1",name:"田中太郎",avatar:"1",currentPick:"候補A (タイプB)",acquisitions:[{name:"大谷翔平",comment:"やっぱり二刀流！"},{name:"佐々木朗希",comment:"完全試合の実績"}]},{id:"2",name:"山田花子",avatar:"3",currentPick:"候補B (タイプA)",acquisitions:[{name:"山本由伸",comment:"最強のエース"}]},{id:"3",name:"佐藤次郎",avatar:"5",currentPick:"選択中...",acquisitions:[]}],ns=[{round:3,picks:[{order:1,userId:"2",userName:"山田花子",avatar:"3",item:"候補アイテムG",comment:"タイプA"},{order:2,userId:"3",userName:"佐藤次郎",avatar:"5",item:"候補アイテムH",comment:"タイプB"},{order:3,userId:"1",userName:"田中太郎",avatar:"1",item:"候補アイテムI",comment:"タイプC"}]},{round:2,picks:[{order:1,userId:"3",userName:"佐藤次郎",avatar:"5",item:"候補アイテムD",comment:"タイプA"},{order:2,userId:"1",userName:"田中太郎",avatar:"1",item:"候補アイテムE",comment:"タイプB"},{order:3,userId:"2",userName:"山田花子",avatar:"3",item:"候補アイテムF",comment:"タイプC"}]},{round:1,picks:[{order:1,userId:"1",userName:"田中太郎",avatar:"1",item:"候補アイテムA",comment:"タイプA"},{order:2,userId:"2",userName:"山田花子",avatar:"3",item:"候補アイテムB",comment:"タイプB"},{order:3,userId:"3",userName:"佐藤次郎",avatar:"5",item:"候補アイテムC",comment:"タイプC"}]}],is=[{id:"1",userName:"システム",avatar:"99",content:"ドラフトを開始しました！",timestamp:"14:00",isSystem:!0,isCurrentUser:!1},{id:"2",userName:"田中太郎",avatar:"1",content:"今年は投手中心でいきます！",timestamp:"14:01",isSystem:!1,isCurrentUser:!0},{id:"3",userName:"システム",avatar:"99",content:"第1巡目が完了しました",timestamp:"14:05",isSystem:!0,isCurrentUser:!1},{id:"4",userName:"山田花子",avatar:"3",content:"大谷取られた〜😭",timestamp:"14:05",isSystem:!1,isCurrentUser:!1},{id:"5",userName:"システム",avatar:"99",content:"佐藤次郎さんの選択中です",timestamp:"14:38",isSystem:!0,isCurrentUser:!1}],us=4,cs=(e,t,o)=>{const[s,n]=d.useState([]),[a,u]=d.useState(!0),[f,m]=d.useState(null);return d.useEffect(()=>{if(!e){n([]),u(!1);return}const g=Ye(et(Se,"app/onlinedraft/log"),Z("groupId","==",e),Z("deleteFlg","==",!1),Ze("date","asc"));return Ae(g,h=>{const v=h.docs.map(i=>{var p;const c=i.data(),y=((p=c.createdAt)==null?void 0:p.toDate())??new Date,l=c.userId==="system"||!c.userId,b={name:l?"システム":"匿名ユーザー",avatar:l?"99":"1"};return{id:i.id,userId:c.userId,userName:b.name,avatar:b.avatar,content:c.message,timestamp:y,isSystem:l,isCurrentUser:!l&&c.userId===o}});n(v),u(!1),m(null)},h=>{console.error("チャットメッセージ監視エラー:",h),m(h),u(!1)})},[e,t,o]),{messages:s,loading:a,error:f}},ls=e=>{const[t,o]=d.useState([]),[s,n]=d.useState(!0),[a,u]=d.useState(null),f=D(M),m=d.useMemo(()=>f.filter(g=>g==null?void 0:g.id).map(g=>g.id),[f]);return d.useEffect(()=>{if(!e||m.length===0){o([]),n(!1);return}const g=new Map,x=[];let h=0;const v=()=>{const i=[];g.forEach(c=>{i.push(...c)}),o(i)};return m.forEach(i=>{const c=tt(Se,"app/onlinedraft/selection",i),y=Ae(c,l=>{const b=[];if(l.exists()){const p=l.data();p!=null&&p.selection&&Array.isArray(p.selection)&&p.selection.forEach(C=>{(!C.groupId||C.groupId===e)&&b.push({...C,userId:i,groupId:C.groupId||e})})}g.set(i,b),v(),h++,h>=m.length&&n(!1)},l=>{console.error(`User ${i} selection error:`,l),u(l),n(!1)});x.push(y)}),()=>{x.forEach(i=>i())}},[e,m]),{selections:t,loading:s,error:a}},ds=e=>{const t=ot(),o=A(U),s=A(H),n=A(M),a=A(X),u=A($),f=A(J);d.useEffect(()=>{const l=sessionStorage.getItem("onlinedraft_user_id");l?(o(e),s(l)):t.push(`/lobby/${e}`)},[e,t,o,s]);const{users:m,loading:g}=st(e);d.useEffect(()=>{const l=m.map(({avatar:b,userId:p,userName:C})=>({name:C,id:p,avatar:b}));n(l)},[m,n]);const{messages:x,loading:h}=cs(e);d.useEffect(()=>{const l=x.map(({userId:b,timestamp:p,content:C})=>({date:p,message:C,userId:b}));a(l)},[x,a]);const{group:v,loading:i}=rt(e);d.useEffect(()=>{u({round:(v==null?void 0:v.round)??-1,groupName:(v==null?void 0:v.groupName)??""})},[v,u]);const{selections:c,loading:y}=ls(e);return d.useEffect(()=>{const l=c.map(({item:b,comment:p,round:C,userId:G,groupId:Ge,randomNumber:qe})=>({item:b,comment:p,round:C,userId:G,groupId:Ge,randomNumber:qe}));f(l)},[c,f]),{isLoading:g||h||i||y}},P=()=>{const e=D(H),t=D(U),{round:o,groupName:s}=D($),n=d.useRef(o),a=mt({base:!0,md:!1}),[u,f]=d.useState({round:-1,userId:""}),[m,g]=d.useState("draft"),x=ut(),h=ct(),v=lt(),i=dt(),{incrementRound:c}=at();d.useEffect(()=>{n.current!==-1&&o>n.current&&i.open(),n.current=o},[o,i]);const y=({userId:C,round:G})=>{f({round:G??o,userId:C??e}),x.open()},l=async({allSelected:C})=>{C?await p():h.open()},b=async C=>{await y(C)},p=async()=>{await c(t),h.close()};return a?r.jsxs(q,{h:"100vh",gap:0,children:[r.jsx(I,{bg:"white",borderBottom:"1px",borderColor:"gray.200",p:2,w:"full",position:"sticky",top:0,zIndex:10,children:r.jsxs(j,{justify:"space-between",align:"center",children:[r.jsx(I,{flex:1}),r.jsx(T,{fontSize:"lg",fontWeight:"bold",textAlign:"center",children:s}),r.jsx(I,{flex:1,display:"flex",justifyContent:"flex-end",children:r.jsx(Y,{variant:"ghost",size:"sm",onClick:v.open,children:r.jsxs(j,{gap:1,align:"center",children:[r.jsx(ee,{size:14}),r.jsx(T,{children:"シェア"})]})})})]})}),r.jsxs(rs,{value:m,onValueChange:C=>g(C.value),flex:1,display:"flex",flexDirection:"column",w:"full",overflow:"hidden",children:[r.jsxs(os,{bg:"gray.50",borderBottom:"2px solid",borderColor:"gray.200",flexShrink:0,children:[r.jsx(me,{value:"draft",flex:1,py:3,px:4,_selected:{bg:"white",color:"blue.600",borderBottom:"2px solid",borderColor:"blue.500",fontWeight:"bold"},transition:"all 0.15s ease",children:r.jsxs(j,{gap:2,justify:"center",w:"full",children:[r.jsx(nt,{size:18}),r.jsx(T,{fontSize:"sm",children:"ドラフト"})]})}),r.jsx(me,{value:"chat",flex:1,py:3,px:4,_selected:{bg:"white",color:"blue.600",borderBottom:"2px solid",borderColor:"blue.500",fontWeight:"bold"},transition:"all 0.15s ease",children:r.jsxs(j,{gap:2,justify:"center",w:"full",children:[r.jsx(it,{size:18}),r.jsx(T,{fontSize:"sm",children:"チャット/ログ"})]})})]}),r.jsxs(I,{flex:1,overflow:"hidden",minH:0,children:[r.jsx(pe,{value:"draft",h:"full",overflow:"auto",p:1,children:r.jsxs(q,{gap:3,p:1,children:[r.jsx(re,{variant:"sp",onItemSelect:y,onOpenResult:l}),r.jsx(ue,{variant:"sp",onEditClick:b})]})}),r.jsx(pe,{value:"chat",h:"full",overflow:"hidden",display:"flex",flexDirection:"column",children:r.jsx(I,{flex:1,overflow:"auto",p:3,children:r.jsx(se,{})})})]})]}),m==="chat"&&r.jsx(I,{bg:"white",borderTop:"1px",borderColor:"gray.200",p:3,w:"full",position:"sticky",bottom:0,children:r.jsx(te,{})}),r.jsx(oe,{isOpen:x.isOpen,onClose:x.close,round:u.round,userId:u.userId},Math.random()),r.jsx(ae,{isOpen:h.isOpen,onClose:h.close,onExecuteOpenResult:p}),r.jsx(ne,{isOpen:v.isOpen,onClose:v.close,groupId:t,groupName:s}),r.jsx(ie,{isOpen:i.isOpen,onClose:i.close,variant:i.variant})]}):r.jsxs(I,{minH:"100vh",py:2,children:[r.jsxs(je,{maxW:"full",children:[r.jsx(I,{mb:2,children:r.jsxs(j,{justify:"space-between",align:"center",children:[r.jsx(T,{fontSize:"2xl",fontWeight:"bold",color:"gray.800",children:s}),r.jsx(Y,{variant:"outline",size:"md",onClick:v.open,children:r.jsxs(j,{gap:1,align:"center",children:[r.jsx(ee,{size:16}),r.jsx(T,{children:"シェア"})]})})]})}),r.jsxs(pt,{templateColumns:"7fr 3fr",gap:2,h:"calc(100vh - 80px)",children:[r.jsx(de,{h:"100%",children:r.jsxs(q,{gap:2,h:"100%",w:"full",align:"stretch",children:[r.jsx(re,{variant:"pc",onItemSelect:y,onOpenResult:l}),r.jsx(ue,{variant:"pc",onEditClick:b})]})}),r.jsx(de,{h:"100%",children:r.jsxs(I,{h:"100%",maxH:"calc(100vh - 70px)",bg:"white",boxShadow:"lg",p:3,borderRadius:"lg",display:"flex",flexDirection:"column",overflow:"hidden",children:[r.jsx(T,{fontSize:"lg",fontWeight:"bold",mb:3,flexShrink:0,children:"チャット"}),r.jsx(I,{flex:"1",overflow:"auto",mb:3,minH:0,children:r.jsx(se,{})}),r.jsx(I,{flexShrink:0,children:r.jsx(te,{})})]})})]})]}),r.jsx(oe,{isOpen:x.isOpen,onClose:x.close,round:u.round,userId:u.userId},Math.random()),r.jsx(ae,{isOpen:h.isOpen,onClose:h.close,onExecuteOpenResult:p}),r.jsx(ne,{isOpen:v.isOpen,onClose:v.close,groupId:t,groupName:s}),r.jsx(ie,{isOpen:i.isOpen,onClose:i.close,variant:i.variant})]})},fe=({groupId:e})=>{const{isLoading:t}=ds(e);return t?r.jsx(I,{bg:"gray.50",minH:"100vh",py:[4,8],children:r.jsx(je,{maxW:"container.lg",children:r.jsx(Qe,{message:"ローディング中..."})})}):r.jsx(P,{})};try{P.displayName="DraftPageInner",P.__docgenInfo={description:`ドラフト実行画面Innerコンポーネント（Presenter）
UI描画と状態管理を担当、新しいhooks構造を使用`,displayName:"DraftPageInner",props:{}}}catch{}try{fe.displayName="DraftPage",fe.__docgenInfo={description:`ドラフト実行画面コンポーネント（Container）
モックデータの提供のみを担当`,displayName:"DraftPage",props:{groupId:{defaultValue:null,description:"",name:"groupId",required:!0,type:{name:"string"}}}}}catch{}const Ue=({initialValues:e,children:t})=>(Ht(e),t),He=as.map(e=>({id:e.id,name:e.name,avatar:e.avatar})),$e=is.map(e=>({date:{toDate:()=>new Date,toMillis:()=>Date.now()},message:e.content,userId:e.userName==="田中太郎"?"user1":"user2"})),We=ns.flatMap(e=>e.picks.map(t=>({item:t.item,comment:t.comment,round:e.round,userId:t.userId,groupId:"test-group-id",randomNumber:Math.random()}))),ze={round:us,groupName:"テストドラフト会議"},vr={title:"features/draft/DraftPage",component:P,parameters:{layout:"fullscreen"}},N={render:()=>r.jsx(Ue,{initialValues:[[U,"test-group-id"],[H,"user1"],[$,ze],[M,He],[X,$e],[J,We]],children:r.jsx(P,{})})},O={render:()=>r.jsx(Ue,{initialValues:[[U,"test-group-id"],[H,"user1"],[$,ze],[M,He],[X,$e],[J,We]],children:r.jsx(P,{})}),parameters:{viewport:{defaultViewport:"mobile1"}}};var ge,he,ve,be,xe;N.parameters={...N.parameters,docs:{...(ge=N.parameters)==null?void 0:ge.docs,source:{originalSource:`{
  render: () => <HydrateAtoms initialValues={[[groupIdAtom, 'test-group-id'], [currentUserIdAtom, 'user1'], [groupAtom, testGroup], [usersAtom, testUsers], [chatsAtom, testChats], [selectionsAtom, testSelections]]}>
      <DraftPageInner />
    </HydrateAtoms>
}`,...(ve=(he=N.parameters)==null?void 0:he.docs)==null?void 0:ve.source},description:{story:`デフォルトのドラフトページ表示
Jotai atomを使用した状態管理テスト`,...(xe=(be=N.parameters)==null?void 0:be.docs)==null?void 0:xe.description}}};var ye,Ce,Ie,Te,Re;O.parameters={...O.parameters,docs:{...(ye=O.parameters)==null?void 0:ye.docs,source:{originalSource:`{
  render: () => <HydrateAtoms initialValues={[[groupIdAtom, 'test-group-id'], [currentUserIdAtom, 'user1'], [groupAtom, testGroup], [usersAtom, testUsers], [chatsAtom, testChats], [selectionsAtom, testSelections]]}>
      <DraftPageInner />
    </HydrateAtoms>,
  parameters: {
    viewport: {
      defaultViewport: 'mobile1'
    }
  }
}`,...(Ie=(Ce=O.parameters)==null?void 0:Ce.docs)==null?void 0:Ie.source},description:{story:`SP表示の強制確認用
ビューポートを小さく設定してSP版レイアウトを確認`,...(Re=(Te=O.parameters)==null?void 0:Te.docs)==null?void 0:Re.description}}};const br=["Default","SPLayout"];export{N as Default,O as SPLayout,br as __namedExportsOrder,vr as default};
