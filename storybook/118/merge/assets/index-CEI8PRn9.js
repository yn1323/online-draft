import{c as pe}from"./index-BRNWFSEf.js";import{r as I,G as S,y as be,P as ge,w,Q as j,z as k,R as A,S as ve,E as q,v as W,T as Q,U as ye,N as H,V as me,W as Ee,X as C,Y as x,Z as Oe,_ as Ne,$ as Fe,a0 as we,c as ke,F as Te}from"./index-B1VjsNl3.js";import{y as z,G as Ie,w as Ce}from"./index-C85FKF7s.js";import{c as Pe}from"./index-CrjboX4Z.js";function Le(e){const t={each(i){var s;for(let n=0;n<((s=e.frames)==null?void 0:s.length);n+=1){const r=e.frames[n];r&&i(r)}},addEventListener(i,s,n){return t.each(r=>{try{r.document.addEventListener(i,s,n)}catch{}}),()=>{try{t.removeEventListener(i,s,n)}catch{}}},removeEventListener(i,s,n){t.each(r=>{try{r.document.removeEventListener(i,s,n)}catch{}})}};return t}function xe(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(i,s,n)=>{try{t==null||t.addEventListener(i,s,n)}catch{}return()=>{try{t==null||t.removeEventListener(i,s,n)}catch{}}},removeEventListener:(i,s,n)=>{try{t==null||t.removeEventListener(i,s,n)}catch{}}}}var J="pointerdown.outside",ee="focus.outside";function De(e){for(const t of e)if(q(t)&&A(t))return!0;return!1}var ae=e=>"clientY"in e;function Be(e,t){if(!ae(t)||!e)return!1;const i=e.getBoundingClientRect();return i.width===0||i.height===0?!1:i.top<=t.clientY&&t.clientY<=i.top+i.height&&i.left<=t.clientX&&t.clientX<=i.left+i.width}function Ae(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function te(e,t){if(!t||!ae(e))return!1;const i=t.scrollHeight>t.clientHeight,s=i&&e.clientX>t.offsetLeft+t.clientWidth,n=t.scrollWidth>t.clientWidth,r=n&&e.clientY>t.offsetTop+t.clientHeight,o={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(i?16:0),height:t.clientHeight+(n?16:0)},d={x:e.clientX,y:e.clientY};return Ae(o,d)?s||r:!1}function Se(e,t){const{exclude:i,onFocusOutside:s,onPointerDownOutside:n,onInteractOutside:r,defer:o}=t;if(!e)return;const d=S(e),u=be(e),a=Le(u),h=xe(u);function b(v,F){if(!q(F)||!F.isConnected||W(e,F)||Be(e,v))return!1;const E=d.querySelector(`[aria-controls="${e.id}"]`);if(E){const O=Q(E);if(te(v,O))return!1}const L=Q(e);return te(v,L)?!1:!(i!=null&&i(F))}const l=new Set,c=ge(e==null?void 0:e.getRootNode());function f(v){function F(E){var Z;const L=o&&!j()?I:R=>R(),O=E??v,U=((Z=O==null?void 0:O.composedPath)==null?void 0:Z.call(O))??[O==null?void 0:O.target];L(()=>{const R=c?U[0]:k(v);if(!(!e||!b(v,R))){if(n||r){const fe=z(n,r);e.addEventListener(J,fe,{once:!0})}se(e,J,{bubbles:!1,cancelable:!0,detail:{originalEvent:O,contextmenu:ve(O),focusable:De(U),target:R}})}})}v.pointerType==="touch"?(l.forEach(E=>E()),l.add(w(d,"click",F,{once:!0})),l.add(h.addEventListener("click",F,{once:!0})),l.add(a.addEventListener("click",F,{once:!0}))):F()}const g=new Set,y=setTimeout(()=>{g.add(w(d,"pointerdown",f,!0)),g.add(h.addEventListener("pointerdown",f,!0)),g.add(a.addEventListener("pointerdown",f,!0))},0);function m(v){(o?I:E=>E())(()=>{const E=k(v);if(!(!e||!b(v,E))){if(s||r){const L=z(s,r);e.addEventListener(ee,L,{once:!0})}se(e,ee,{bubbles:!1,cancelable:!0,detail:{originalEvent:v,contextmenu:!1,focusable:A(E),target:E}})}})}return j()||(g.add(w(d,"focusin",m,!0)),g.add(h.addEventListener("focusin",m,!0)),g.add(a.addEventListener("focusin",m,!0))),()=>{clearTimeout(y),l.forEach(v=>v()),g.forEach(v=>v())}}function Re(e,t){const{defer:i}=t,s=i?I:r=>r(),n=[];return n.push(s(()=>{const r=typeof e=="function"?e():e;n.push(Se(r,t))})),()=>{n.forEach(r=>r==null?void 0:r())}}function se(e,t,i){const s=e.ownerDocument.defaultView||window,n=new s.CustomEvent(t,i);return e.dispatchEvent(n)}function Ge(e,t){const i=s=>{s.key==="Escape"&&(s.isComposing||t==null||t(s))};return w(S(e),"keydown",i,{capture:!0})}var N={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){var s;const t=this.indexOf(e),i=this.topMostPointerBlockingLayer()?this.indexOf((s=this.topMostPointerBlockingLayer())==null?void 0:s.node):-1;return t<i},isTopMost(e){const t=this.layers[this.count()-1];return(t==null?void 0:t.node)===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},isInNestedLayer(e,t){return this.getNestedLayers(e).some(i=>W(i.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>W(t,e))},add(e){const t=this.layers.push(e);e.node.style.setProperty("--layer-index",`${t}`)},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(s=>s.dismiss()),this.layers.splice(t,1),e.style.removeProperty("--layer-index"))},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e){var t;(t=this.layers[this.indexOf(e)])==null||t.dismiss()},clear(){this.remove(this.layers[0].node)}},ie;function ne(){N.layers.forEach(({node:e})=>{e.style.pointerEvents=N.isBelowPointerBlockingLayer(e)?"none":"auto"})}function Me(e){e.style.pointerEvents=""}function Ke(e,t){const i=S(e),s=[];if(N.hasPointerBlockingLayer()&&!i.body.hasAttribute("data-inert")&&(ie=document.body.style.pointerEvents,queueMicrotask(()=>{i.body.style.pointerEvents="none",i.body.setAttribute("data-inert","")})),t){const n=ye(t,r=>{s.push(H(r,{pointerEvents:"auto"}))});s.push(n)}return()=>{N.hasPointerBlockingLayer()||(queueMicrotask(()=>{i.body.style.pointerEvents=ie,i.body.removeAttribute("data-inert"),i.body.style.length===0&&i.body.removeAttribute("style")}),s.forEach(n=>n()))}}function We(e,t){const{warnOnMissingNode:i=!0}=t;if(i&&!e){Ce("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:s,pointerBlocking:n,exclude:r,debug:o}=t,d={dismiss:s,node:e,pointerBlocking:n};N.add(d),ne();function u(c){var g,y;const f=k(c.detail.originalEvent);N.isBelowPointerBlockingLayer(e)||N.isInBranch(f)||((g=t.onPointerDownOutside)==null||g.call(t,c),(y=t.onInteractOutside)==null||y.call(t,c),!c.defaultPrevented&&(o&&console.log("onPointerDownOutside:",c.detail.originalEvent),s==null||s()))}function a(c){var g,y;const f=k(c.detail.originalEvent);N.isInBranch(f)||((g=t.onFocusOutside)==null||g.call(t,c),(y=t.onInteractOutside)==null||y.call(t,c),!c.defaultPrevented&&(o&&console.log("onFocusOutside:",c.detail.originalEvent),s==null||s()))}function h(c){var f;N.isTopMost(e)&&((f=t.onEscapeKeyDown)==null||f.call(t,c),!c.defaultPrevented&&s&&(c.preventDefault(),s()))}function b(c){var m;if(!e)return!1;const f=typeof r=="function"?r():r,g=Array.isArray(f)?f:[f],y=(m=t.persistentElements)==null?void 0:m.map(v=>v()).filter(q);return y&&g.push(...y),g.some(v=>W(v,c))||N.isInNestedLayer(e,c)}const l=[n?Ke(e,t.persistentElements):void 0,Ge(e,h),Re(e,{exclude:b,onFocusOutside:a,onPointerDownOutside:u,defer:t.defer})];return()=>{N.remove(e),ne(),Me(e),l.forEach(c=>c==null?void 0:c())}}function $e(e,t){const{defer:i}=t,s=i?I:r=>r(),n=[];return n.push(s(()=>{const r=Ie(e)?e():e;n.push(We(r,t))})),()=>{n.forEach(r=>r==null?void 0:r())}}var P=new WeakMap,G=new WeakMap,M={},$=0,ce=e=>e&&(e.host||ce(e.parentNode)),_e=(e,t)=>t.map(i=>{if(e.contains(i))return i;const s=ce(i);return s&&e.contains(s)?s:(console.error("[zag-js > ariaHidden] target",i,"in not contained inside",e,". Doing nothing"),null)}).filter(i=>!!i),He=e=>e.localName==="next-route-announcer"||e.localName==="script"||e.hasAttribute("aria-live")?!0:e.matches("[data-live-announcer]"),Ve=(e,t)=>{const{parentNode:i,markerName:s,controlAttribute:n}=t,r=_e(i,Array.isArray(e)?e:[e]);M[s]||(M[s]=new WeakMap);const o=M[s],d=[],u=new Set,a=new Set(r),h=l=>{!l||u.has(l)||(u.add(l),h(l.parentNode))};r.forEach(h);const b=l=>{!l||a.has(l)||Array.prototype.forEach.call(l.children,c=>{if(u.has(c))b(c);else try{if(He(c))return;const g=c.getAttribute(n)==="true",y=(P.get(c)||0)+1,m=(o.get(c)||0)+1;P.set(c,y),o.set(c,m),d.push(c),y===1&&g&&G.set(c,!0),m===1&&c.setAttribute(s,""),g||c.setAttribute(n,"true")}catch(f){console.error("[zag-js > ariaHidden] cannot operate on ",c,f)}})};return b(i),u.clear(),$++,()=>{d.forEach(l=>{const c=P.get(l)-1,f=o.get(l)-1;P.set(l,c),o.set(l,f),c||(G.has(l)||l.removeAttribute(n),G.delete(l)),f||l.removeAttribute(s)}),$--,$||(P=new WeakMap,P=new WeakMap,G=new WeakMap,M={})}},Ye=e=>(Array.isArray(e)?e[0]:e).ownerDocument.body,Xe=(e,t=Ye(e),i="data-aria-hidden")=>{if(t)return Ve(e,{parentNode:t,markerName:i,controlAttribute:"aria-hidden"})},qe=e=>{const t=requestAnimationFrame(()=>e());return()=>cancelAnimationFrame(t)};function Ue(e,t={}){const{defer:i=!0}=t,s=i?qe:r=>r(),n=[];return n.push(s(()=>{const o=(typeof e=="function"?e():e).filter(Boolean);o.length!==0&&n.push(Xe(o))})),()=>{n.forEach(r=>r==null?void 0:r())}}var Ze=Object.defineProperty,je=(e,t,i)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,p=(e,t,i)=>je(e,typeof t!="symbol"?t+"":t,i),re={activateTrap(e,t){if(e.length>0){const s=e[e.length-1];s!==t&&s.pause()}const i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap(e,t){const i=e.indexOf(t);i!==-1&&e.splice(i,1),e.length>0&&e[e.length-1].unpause()}},Qe=[],ze=class{constructor(e,t){p(this,"trapStack"),p(this,"config"),p(this,"doc"),p(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),p(this,"listenerCleanups",[]),p(this,"handleFocus",s=>{const n=k(s),r=this.findContainerIndex(n,s)>=0;if(r||Oe(n))r&&(this.state.mostRecentlyFocusedNode=n);else{s.stopImmediatePropagation();let o,d=!0;if(this.state.mostRecentlyFocusedNode)if(x(this.state.mostRecentlyFocusedNode)>0){const u=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:a}=this.state.containerGroups[u];if(a.length>0){const h=a.findIndex(b=>b===this.state.mostRecentlyFocusedNode);h>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?h+1<a.length&&(o=a[h+1],d=!1):h-1>=0&&(o=a[h-1],d=!1))}}else this.state.containerGroups.some(u=>u.tabbableNodes.some(a=>x(a)>0))||(d=!1);else d=!1;d&&(o=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),o?this.tryFocus(o):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),p(this,"handlePointerDown",s=>{const n=k(s);if(!(this.findContainerIndex(n,s)>=0)){if(B(this.config.clickOutsideDeactivates,s)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}B(this.config.allowOutsideClick,s)||s.preventDefault()}}),p(this,"handleClick",s=>{const n=k(s);this.findContainerIndex(n,s)>=0||B(this.config.clickOutsideDeactivates,s)||B(this.config.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())}),p(this,"handleTabKey",s=>{if(this.config.isKeyForward(s)||this.config.isKeyBackward(s)){this.state.recentNavEvent=s;const n=this.config.isKeyBackward(s),r=this.findNextNavNode({event:s,isBackward:n});if(!r)return;D(s)&&s.preventDefault(),this.tryFocus(r)}}),p(this,"handleEscapeKey",s=>{Je(s)&&B(this.config.escapeDeactivates,s)!==!1&&(s.preventDefault(),this.deactivate())}),p(this,"_mutationObserver"),p(this,"setupMutationObserver",()=>{const s=this.doc.defaultView||window;this._mutationObserver=new s.MutationObserver(n=>{n.some(o=>Array.from(o.removedNodes).some(u=>u===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode())})}),p(this,"updateObservedNodes",()=>{var s;(s=this._mutationObserver)==null||s.disconnect(),this.state.active&&!this.state.paused&&this.state.containers.map(n=>{var r;(r=this._mutationObserver)==null||r.observe(n,{subtree:!0,childList:!0})})}),p(this,"getInitialFocusNode",()=>{let s=this.getNodeForOption("initialFocus",{hasFallback:!0});if(s===!1)return!1;if(s===void 0||s&&!A(s))if(this.findContainerIndex(this.doc.activeElement)>=0)s=this.doc.activeElement;else{const n=this.state.tabbableGroups[0];s=n&&n.firstTabbableNode||this.getNodeForOption("fallbackFocus")}else s===null&&(s=this.getNodeForOption("fallbackFocus"));if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s.isConnected||(s=this.getNodeForOption("fallbackFocus")),s}),p(this,"tryFocus",s=>{if(s!==!1&&s!==Ne(this.doc)){if(!s||!s.focus){this.tryFocus(this.getInitialFocusNode());return}s.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=s,et(s)&&s.select()}}),p(this,"deactivate",s=>{if(!this.state.active)return this;const n={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...s};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),re.deactivateTrap(this.trapStack,this);const r=this.getOption(n,"onDeactivate"),o=this.getOption(n,"onPostDeactivate"),d=this.getOption(n,"checkCanReturnFocus"),u=this.getOption(n,"returnFocus","returnFocusOnDeactivate");r==null||r();const a=()=>{oe(()=>{if(u){const h=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(h)}o==null||o()})};if(u&&d){const h=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return d(h).then(a,a),this}return a(),this}),p(this,"pause",s=>{if(this.state.paused||!this.state.active)return this;const n=this.getOption(s,"onPause"),r=this.getOption(s,"onPostPause");return this.state.paused=!0,n==null||n(),this.removeListeners(),this.updateObservedNodes(),r==null||r(),this}),p(this,"unpause",s=>{if(!this.state.paused||!this.state.active)return this;const n=this.getOption(s,"onUnpause"),r=this.getOption(s,"onPostUnpause");return this.state.paused=!1,n==null||n(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),r==null||r(),this}),p(this,"updateContainerElements",s=>(this.state.containers=Array.isArray(s)?s.filter(Boolean):[s].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),p(this,"getReturnFocusNode",s=>{const n=this.getNodeForOption("setReturnFocus",{params:[s]});return n||(n===!1?!1:s)}),p(this,"getOption",(s,n,r)=>s&&s[n]!==void 0?s[n]:this.config[r||n]),p(this,"getNodeForOption",(s,{hasFallback:n=!1,params:r=[]}={})=>{let o=this.config[s];if(typeof o=="function"&&(o=o(...r)),o===!0&&(o=void 0),!o){if(o===void 0||o===!1)return o;throw new Error(`\`${s}\` was specified but was not a node, or did not return a node`)}let d=o;if(typeof o=="string"){try{d=this.doc.querySelector(o)}catch(u){throw new Error(`\`${s}\` appears to be an invalid selector; error="${u.message}"`)}if(!d&&!n)throw new Error(`\`${s}\` as selector refers to no known node`)}return d}),p(this,"findNextNavNode",s=>{const{event:n,isBackward:r=!1}=s,o=s.target||k(n);this.updateTabbableNodes();let d=null;if(this.state.tabbableGroups.length>0){const u=this.findContainerIndex(o,n),a=u>=0?this.state.containerGroups[u]:void 0;if(u<0)r?d=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:d=this.state.tabbableGroups[0].firstTabbableNode;else if(r){let h=this.state.tabbableGroups.findIndex(({firstTabbableNode:b})=>o===b);if(h<0&&((a==null?void 0:a.container)===o||A(o)&&!C(o)&&!(a!=null&&a.nextTabbableNode(o,!1)))&&(h=u),h>=0){const b=h===0?this.state.tabbableGroups.length-1:h-1,l=this.state.tabbableGroups[b];d=x(o)>=0?l.lastTabbableNode:l.lastDomTabbableNode}else D(n)||(d=a==null?void 0:a.nextTabbableNode(o,!1))}else{let h=this.state.tabbableGroups.findIndex(({lastTabbableNode:b})=>o===b);if(h<0&&((a==null?void 0:a.container)===o||A(o)&&!C(o)&&!(a!=null&&a.nextTabbableNode(o)))&&(h=u),h>=0){const b=h===this.state.tabbableGroups.length-1?0:h+1,l=this.state.tabbableGroups[b];d=x(o)>=0?l.firstTabbableNode:l.firstDomTabbableNode}else D(n)||(d=a==null?void 0:a.nextTabbableNode(o))}}else d=this.getNodeForOption("fallbackFocus");return d}),this.trapStack=t.trapStack||Qe;const i={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward(s){return D(s)&&!s.shiftKey},isKeyBackward(s){return D(s)&&s.shiftKey},...t};this.doc=i.document||S(Array.isArray(e)?e[0]:e),this.config=i,this.updateContainerElements(e),this.setupMutationObserver()}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(e,t){const i=typeof(t==null?void 0:t.composedPath)=="function"?t.composedPath():void 0;return this.state.containerGroups.findIndex(({container:s,tabbableNodes:n})=>s.contains(e)||(i==null?void 0:i.includes(s))||n.find(r=>r===e))}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(e=>{const t=me(e),i=Ee(e),s=t.length>0?t[0]:void 0,n=t.length>0?t[t.length-1]:void 0,r=i.find(a=>C(a)),o=i.slice().reverse().find(a=>C(a)),d=!!t.find(a=>x(a)>0);function u(a,h=!0){const b=t.indexOf(a);return b<0?h?i.slice(i.indexOf(a)+1).find(l=>C(l)):i.slice(0,i.indexOf(a)).reverse().find(l=>C(l)):t[b+(h?1:-1)]}return{container:e,tabbableNodes:t,focusableNodes:i,posTabIndexesFound:d,firstTabbableNode:s,lastTabbableNode:n,firstDomTabbableNode:r,lastDomTabbableNode:o,nextTabbableNode:u}}),this.state.tabbableGroups=this.state.containerGroups.filter(e=>e.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(e=>e.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return re.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?oe(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(w(this.doc,"focusin",this.handleFocus,!0),w(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),w(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),w(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),w(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),w(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(e=>e()),this.listenerCleanups=[],this}activate(e){if(this.state.active)return this;const t=this.getOption(e,"onActivate"),i=this.getOption(e,"onPostActivate"),s=this.getOption(e,"checkCanFocusTrap");s||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=this.doc.activeElement||null,t==null||t();const n=()=>{s&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),i==null||i()};return s?(s(this.state.containers.concat()).then(n,n),this):(n(),this)}},D=e=>e.key==="Tab",B=(e,...t)=>typeof e=="function"?e(...t):e,Je=e=>!e.isComposing&&e.key==="Escape",oe=e=>setTimeout(e,0),et=e=>e.localName==="input"&&"select"in e&&typeof e.select=="function";function tt(e,t={}){let i;const s=I(()=>{const n=typeof e=="function"?e():e;if(n){i=new ze(n,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:n,...t,document:S(n)});try{i.activate()}catch{}}});return function(){i==null||i.deactivate(),s()}}var _="data-scroll-lock";function st(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function it(e){const t=e??document,i=t.defaultView??window,{documentElement:s,body:n}=t;if(n.hasAttribute(_))return;const o=i.innerWidth-s.clientWidth;n.setAttribute(_,"");const d=()=>Fe(s,"--scrollbar-width",`${o}px`),u=st(s),a=()=>H(n,{overflow:"hidden",[u]:`${o}px`}),h=()=>{const{scrollX:l,scrollY:c,visualViewport:f}=i,g=(f==null?void 0:f.offsetLeft)??0,y=(f==null?void 0:f.offsetTop)??0,m=H(n,{position:"fixed",overflow:"hidden",top:`${-(c-Math.floor(y))}px`,left:`${-(l-Math.floor(g))}px`,right:"0",[u]:`${o}px`});return()=>{m==null||m(),i.scrollTo({left:l,top:c,behavior:"instant"})}},b=[d(),we()?h():a()];return()=>{b.forEach(l=>l==null?void 0:l()),n.removeAttribute(_)}}var nt=pe("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),T=nt.build(),le=e=>{var t;return((t=e.ids)==null?void 0:t.positioner)??`dialog:${e.id}:positioner`},de=e=>{var t;return((t=e.ids)==null?void 0:t.backdrop)??`dialog:${e.id}:backdrop`},V=e=>{var t;return((t=e.ids)==null?void 0:t.content)??`dialog:${e.id}:content`},ue=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`dialog:${e.id}:trigger`},Y=e=>{var t;return((t=e.ids)==null?void 0:t.title)??`dialog:${e.id}:title`},X=e=>{var t;return((t=e.ids)==null?void 0:t.description)??`dialog:${e.id}:description`},he=e=>{var t;return((t=e.ids)==null?void 0:t.closeTrigger)??`dialog:${e.id}:close`},K=e=>e.getById(V(e)),rt=e=>e.getById(le(e)),ot=e=>e.getById(de(e)),at=e=>e.getById(ue(e)),ct=e=>e.getById(Y(e)),lt=e=>e.getById(X(e)),dt=e=>e.getById(he(e));function bt(e,t){const{state:i,send:s,context:n,prop:r,scope:o}=e,d=r("aria-label"),u=i.matches("open");return{open:u,setOpen(a){i.matches("open")!==a&&s({type:a?"OPEN":"CLOSE"})},getTriggerProps(){return t.button({...T.trigger.attrs,dir:r("dir"),id:ue(o),"aria-haspopup":"dialog",type:"button","aria-expanded":u,"data-state":u?"open":"closed","aria-controls":V(o),onClick(a){a.defaultPrevented||s({type:"TOGGLE"})}})},getBackdropProps(){return t.element({...T.backdrop.attrs,dir:r("dir"),hidden:!u,id:de(o),"data-state":u?"open":"closed"})},getPositionerProps(){return t.element({...T.positioner.attrs,dir:r("dir"),id:le(o),style:{pointerEvents:u?void 0:"none"}})},getContentProps(){const a=n.get("rendered");return t.element({...T.content.attrs,dir:r("dir"),role:r("role"),hidden:!u,id:V(o),tabIndex:-1,"data-state":u?"open":"closed","aria-modal":!0,"aria-label":d||void 0,"aria-labelledby":d||!a.title?void 0:Y(o),"aria-describedby":a.description?X(o):void 0})},getTitleProps(){return t.element({...T.title.attrs,dir:r("dir"),id:Y(o)})},getDescriptionProps(){return t.element({...T.description.attrs,dir:r("dir"),id:X(o)})},getCloseTriggerProps(){return t.button({...T.closeTrigger.attrs,dir:r("dir"),id:he(o),type:"button",onClick(a){a.defaultPrevented||(a.stopPropagation(),s({type:"CLOSE"}))}})}}}var gt=ke({props({props:e,scope:t}){const i=e.role==="alertdialog";return{role:"dialog",modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!i,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:i?()=>dt(t):void 0,...e}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{rendered:e(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:e,action:t,prop:i}){e([()=>i("open")],()=>{t(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackDismissableElement({scope:e,send:t,prop:i}){return $e(()=>K(e),{defer:!0,pointerBlocking:i("modal"),exclude:[at(e)],onInteractOutside(n){var r;(r=i("onInteractOutside"))==null||r(n),i("closeOnInteractOutside")||n.preventDefault()},persistentElements:i("persistentElements"),onFocusOutside:i("onFocusOutside"),onPointerDownOutside:i("onPointerDownOutside"),onEscapeKeyDown(n){var r;(r=i("onEscapeKeyDown"))==null||r(n),i("closeOnEscape")||n.preventDefault()},onDismiss(){t({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:e,prop:t}){if(t("preventScroll"))return it(e.getDoc())},trapFocus({scope:e,prop:t}){return!t("trapFocus")||!t("modal")?void 0:tt(()=>K(e),{preventScroll:!0,returnFocusOnDeactivate:!!t("restoreFocus"),initialFocus:t("initialFocusEl"),setReturnFocus:s=>{var n;return((n=t("finalFocusEl"))==null?void 0:n())??s}})},hideContentBelow({scope:e,prop:t}){return t("modal")?Ue(()=>[K(e)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:e,scope:t}){I(()=>{e.set("rendered",{title:!!ct(t),description:!!lt(t)})})},syncZIndex({scope:e}){I(()=>{const t=K(e);if(!t)return;const i=Te(t);[rt(e),ot(e)].forEach(n=>{n==null||n.style.setProperty("--z-index",i.zIndex)})})},invokeOnClose({prop:e}){var t;(t=e("onOpenChange"))==null||t({open:!1})},invokeOnOpen({prop:e}){var t;(t=e("onOpenChange"))==null||t({open:!0})},toggleVisibility({prop:e,send:t,event:i}){t({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:i})}}}});Pe()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);export{Ue as a,nt as b,bt as c,gt as m,$e as t};
