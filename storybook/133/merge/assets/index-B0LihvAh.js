import{j as e}from"./create-recipe-context-LbQq3bM7.js";import{R}from"./responsive-modal-BJWOw55G.js";import{r as t}from"./index-BXymfbzT.js";import{V as b}from"./v-stack-DfIdlA7P.js";import{H as V}from"./h-stack-BOuMwgNM.js";import{I as w}from"./image-D2VQ_BCA.js";import{T as f}from"./text-BOFVnBsW.js";import{B as C}from"./box-p2MKwv57.js";import{I as q}from"./input-D57sxenT.js";import{T as z}from"./textarea-DDSotln4.js";const y=({isOpen:d,onClose:p,roundNumber:h,participant:s,initialSelection:r,onSaveSelection:v})=>{const[a,u]=t.useState(""),[n,c]=t.useState(""),[x,l]=t.useState(!1);t.useEffect(()=>{if(d){const o=(r==null?void 0:r.item)||"",m=(r==null?void 0:r.comment)||"";u(o),c(m),l(!1)}},[d,r]),t.useEffect(()=>{const o=a.trim(),m=n.trim(),k=(r==null?void 0:r.item)||"",I=(r==null?void 0:r.comment)||"";l(o!==k||m!==I)},[a,n,r]);const _=()=>{const o=a.trim();if(!o)return;const m={userId:s.id,userName:s.name,item:o,comment:n.trim()||void 0};v(h,m),p()},g=()=>{u((r==null?void 0:r.item)||""),c((r==null?void 0:r.comment)||""),l(!1),p()},j=()=>{x?confirm("未保存の変更があります。閉じますか？")&&g():g()};return e.jsx(R,{isOpen:d,onClose:j,title:`ラウンド ${h}: ${s.name}の選択`,actions:{cancel:{text:"キャンセル",onClick:g},submit:{text:"保存",colorPalette:"green",disabled:!x||!a.trim(),onClick:_}},children:e.jsxs(b,{gap:6,align:"stretch",w:"full",children:[e.jsxs(V,{gap:3,justify:"center",children:[e.jsx(w,{src:`/img/${s.avatar}.png`,alt:s.name,width:"48px",height:"48px",borderRadius:"md",objectFit:"cover"}),e.jsx(f,{fontSize:"xl",fontWeight:"bold",color:"gray.800",_dark:{color:"gray.200"},children:s.name})]}),e.jsxs(b,{gap:4,align:"stretch",children:[e.jsxs(C,{children:[e.jsx(f,{fontSize:"sm",fontWeight:"medium",mb:2,color:"gray.600",_dark:{color:"gray.400"},children:"選択 *"}),e.jsx(q,{value:a,onChange:o=>u(o.target.value),placeholder:"選択を入力してください...",size:"lg",borderWidth:2,borderColor:"gray.300",_focus:{borderColor:"green.500",boxShadow:"0 0 0 1px var(--chakra-colors-green-500)"},_dark:{borderColor:"gray.600",bg:"gray.700",_focus:{borderColor:"green.400",boxShadow:"0 0 0 1px var(--chakra-colors-green-400)"}}})]}),e.jsxs(C,{children:[e.jsx(f,{fontSize:"sm",fontWeight:"medium",mb:2,color:"green.600",_dark:{color:"green.300"},children:"コメント（任意）"}),e.jsx(z,{value:n,onChange:o=>c(o.target.value),placeholder:"選択理由やコメントを入力してください...",rows:3,resize:"none",size:"lg",borderWidth:2,borderColor:"gray.300",_focus:{borderColor:"green.500",boxShadow:"0 0 0 1px var(--chakra-colors-green-500)"},_dark:{borderColor:"gray.600",bg:"gray.700",_focus:{borderColor:"green.400",boxShadow:"0 0 0 1px var(--chakra-colors-green-400)"}}})]})]})]})})};try{y.displayName="UserRoundDetailModal",y.__docgenInfo={description:"",displayName:"UserRoundDetailModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},roundNumber:{defaultValue:null,description:"",name:"roundNumber",required:!0,type:{name:"number"}},participant:{defaultValue:null,description:"",name:"participant",required:!0,type:{name:"Participant"}},initialSelection:{defaultValue:null,description:"",name:"initialSelection",required:!1,type:{name:"RoundSelection"}},onSaveSelection:{defaultValue:null,description:"",name:"onSaveSelection",required:!0,type:{name:"(roundNumber: number, selection: RoundSelection) => void"}}}}}catch{}export{y as U};
