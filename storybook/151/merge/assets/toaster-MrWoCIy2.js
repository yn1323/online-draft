import"./stack-BPGBxmP7.js";import{c as x}from"./index-BRNWFSEf.js";import{b as w,r as y,G as D}from"./index-RgLjKqdB.js";var k=x("toast").parts("group","root","title","description","actionTrigger","closeTrigger");k.build();var I=(t,a)=>({...a,...w(t)});function P(t){const a=I(t,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let m=[],r=[],f=new Set,d=[];const T=e=>(m.push(e),()=>{const s=m.indexOf(e);m.splice(s,1)}),i=e=>(m.forEach(s=>s(e)),e),b=e=>{if(r.length>=a.max){d.push(e);return}i(e),r.unshift(e)},S=()=>{for(;d.length>0&&r.length<a.max;){const e=d.shift();e&&(i(e),r.unshift(e))}},c=e=>{const s=e.id??`toast:${D()}`,u=r.find(n=>n.id===s);return f.has(s)&&f.delete(s),u?r=r.map(n=>n.id===s?i({...n,...e,id:s}):n):b({id:s,duration:a.duration,removeDelay:a.removeDelay,type:"info",...e,stacked:!a.overlap,gap:a.gap}),s},h=e=>(f.add(e),e?(m.forEach(s=>s({id:e,dismiss:!0})),r=r.filter(s=>s.id!==e),S()):(r.forEach(s=>{m.forEach(u=>u({id:s.id,dismiss:!0}))}),r=[],d=[]),e);return{attrs:a,subscribe:T,create:c,update:(e,s)=>c({id:e,...s}),remove:h,dismiss:e=>{e!=null?r=r.map(s=>s.id===e?i({...s,message:"DISMISS"}):s):r=r.map(s=>i({...s,message:"DISMISS"}))},error:e=>c({...e,type:"error"}),success:e=>c({...e,type:"success"}),info:e=>c({...e,type:"info"}),warning:e=>c({...e,type:"warning"}),loading:e=>c({...e,type:"loading"}),getVisibleToasts:()=>r.filter(e=>!f.has(e.id)),getCount:()=>r.length,promise:(e,s,u={})=>{if(!s)return;let n;s.loading!==void 0&&(n=c({...u,...s.loading,promise:e,type:"loading"}));let g=n!==void 0,p;const E=y(e).then(async o=>{if(p=["resolve",o],O(o)&&!o.ok){g=!1;const l=y(s.error,`HTTP Error! status: ${o.status}`);c({...u,...l,id:n,type:"error"})}else if(s.success!==void 0){g=!1;const l=y(s.success,o);c({...u,...l,id:n,type:"success"})}}).catch(async o=>{if(p=["reject",o],s.error!==void 0){g=!1;const l=y(s.error,o);c({...u,...l,id:n,type:"error"})}}).finally(()=>{var o;g&&(h(n),n=void 0),(o=s.finally)==null||o.call(s)});return{id:n,unwrap:()=>new Promise((o,l)=>E.then(()=>p[0]==="reject"?l(p[1]):o(p[1])).catch(l))}},pause:e=>{e!=null?r=r.map(s=>s.id===e?i({...s,message:"PAUSE"}):s):r=r.map(s=>i({...s,message:"PAUSE"}))},resume:e=>{e!=null?r=r.map(s=>s.id===e?i({...s,message:"RESUME"}):s):r=r.map(s=>i({...s,message:"RESUME"}))},isVisible:e=>!f.has(e)&&!!r.find(s=>s.id===e),isDismissed:e=>f.has(e),expand:()=>{r=r.map(e=>i({...e,stacked:!0}))},collapse:()=>{r=r.map(e=>i({...e,stacked:!1}))}}}var O=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number";const M=t=>P(t),v=M({placement:"bottom-end",pauseOnPageIdle:!0}),Y=()=>{const t={duration:3e3,closable:!0};return{successToast:r=>{v.create({description:r,type:"success",...t})},errorToast:r=>{v.create({description:r,type:"error",...t})}}};export{Y as u};
