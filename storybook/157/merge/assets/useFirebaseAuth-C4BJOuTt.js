import{a,s as c}from"./firebase-DBrNdAmE.js";import"./index.esm2017-mzQehXGw.js";import{r as u}from"./index-BXymfbzT.js";const h=()=>{const[t,e]=u.useState({user:null,loading:!0,error:null});u.useEffect(()=>a.onAuthStateChanged(r=>{e({user:r,loading:!1,error:null})},r=>{e({user:null,loading:!1,error:r})}),[]);const l=async()=>{try{return e(r=>({...r,loading:!0,error:null})),(await c(a)).user}catch(s){if(s instanceof Error){let n="予期しないエラーが発生しました";s.message.includes("permission-denied")?n="認証権限エラー - この操作は許可されていません":s.message.includes("unavailable")&&(n="接続エラー - インターネット接続を確認してください");const o=new Error(n);throw e(i=>({...i,loading:!1,error:o})),o}const r=new Error("認証処理中にエラーが発生しました");throw e(n=>({...n,loading:!1,error:r})),r}};return{user:t.user,loading:t.loading,error:t.error,signInAnonymous:l,isAuthenticated:!!t.user}};export{h as u};
