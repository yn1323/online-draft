import{j as e}from"./create-recipe-context-LbQq3bM7.js";import{r as p}from"./index-BXymfbzT.js";import{t as s}from"./toaster-Ccw28dmr.js";import{J as j}from"./index-BRfw8Nuq.js";import{J as M}from"./index-CJpu4tT-.js";import{R as I}from"./index-BYNb3wm3.js";import{B as E}from"./box-p2MKwv57.js";import{C as S}from"./container-BXrbxM4E.js";import{V as d}from"./v-stack-DfIdlA7P.js";import{H as w}from"./heading-B7_y7u_0.js";import{T as L}from"./text-BOFVnBsW.js";import"./jsx-runtime-Bw5QeaCk.js";import"./index-BRNWFSEf.js";import"./index-C85FKF7s.js";import"./schemas-Dit_s0T_.js";import"./types-DwQkBYn-.js";import"./index-ZS65BhKO.js";import"./iconBase-BtwG8oUN.js";import"./index-DLok-9d1.js";import"./button-Cvi4ewak.js";import"./index-BtdCwzVt.js";import"./color-mode-DpbueTiJ.js";import"./index-B2ItOoBf.js";import"./icon-button-Bwmz2JOC.js";import"./stack-B-mkjmc_.js";import"./input-C3XuNbVL.js";import"./factory-OeC611uy.js";import"./index-B1VjsNl3.js";import"./use-field-context-BeRDi0mX.js";import"./h-stack-BOuMwgNM.js";import"./index-DTSGLcC3.js";import"./simple-grid-B5XIW-CE.js";import"./grid-DCXQ59mM.js";async function u(t){return!t||t.trim().length===0?{success:!1,error:"会議IDが入力されていません"}:t.length<3?{success:!1,error:"無効な会議IDです"}:{success:!0,meetingId:t}}const R=[{id:"abc123",name:"今日のランチドラフト",lastJoined:"2時間前"},{id:"def456",name:"映画選びドラフト",lastJoined:"1日前"},{id:"ghi789",name:"チームドラフト",lastJoined:"3日前"}],_=()=>{const[t,m]=p.useState(null),[y,c]=p.useState(!1),x=async o=>{var r;c(!0);try{let i=o.meetingInput.trim();const l=o.meetingInput.match(/\/(entry|lobby)\/([a-zA-Z0-9]+)/);l&&(i=l[2]);const a=await u(i);if(a.success)window.location.href=`/lobby/${a.meetingId}`;else{const J=(r=a.error)!=null&&r.includes("見つから")?"参加コードが見つかりませんでした。主催者に確認してみてください。":"参加できませんでした。参加コードを確認してください。";s.create({title:"参加できませんでした",description:J,type:"error",duration:5e3})}}catch(i){console.error("参加エラー:",i),s.create({title:"接続エラー",description:"接続に問題が発生しました。しばらく待ってから再度お試しください。",type:"error",duration:5e3})}finally{c(!1)}},b=async o=>{m(o);try{const r=await u(o);r.success?window.location.href=`/lobby/${r.meetingId}`:s.create({title:"参加できませんでした",description:"グループが見つかりませんでした。",type:"error",duration:5e3})}catch(r){console.error("参加エラー:",r),s.create({title:"参加エラー",description:"参加できませんでした。",type:"error",duration:5e3})}finally{m(null)}};return e.jsx(E,{minHeight:"100vh",bg:"bg",children:e.jsx(S,{maxW:"container.md",py:{base:4,md:8},children:e.jsxs(d,{gap:{base:6,md:8},align:"stretch",children:[e.jsxs(d,{gap:2,textAlign:"center",children:[e.jsx(w,{as:"h1",size:{base:"lg",md:"xl"},fontWeight:"bold",color:"gray.800",_dark:{color:"gray.100"},children:"グループに参加"}),e.jsx(L,{fontSize:{base:"sm",md:"md"},color:"gray.600",_dark:{color:"gray.400"},children:"参加コードやURLを入力してください"})]}),e.jsx(j,{onSubmit:x,isLoading:y}),e.jsx(I,{meetings:R,onJoinMeeting:b,loadingMeetingId:t}),e.jsx(M,{})]})})})},ce={title:"Features/Join/JoinPage",component:_,parameters:{layout:"fullscreen"}},n={};var g,f,h;n.parameters={...n.parameters,docs:{...(g=n.parameters)==null?void 0:g.docs,source:{originalSource:"{}",...(h=(f=n.parameters)==null?void 0:f.docs)==null?void 0:h.source}}};const le=["Default"];export{n as Default,le as __namedExportsOrder,ce as default};
