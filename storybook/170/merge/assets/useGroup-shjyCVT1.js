import{d as w}from"./firebase-C-ezhxfZ.js";import{c as f,e as g,b as n,d as c,g as u,u as h}from"./index.esm2017-rypblU8U.js";import{r as s}from"./index-BXymfbzT.js";const D=()=>{const o=f(w,"app/onlinedraft/group"),d=s.useCallback(async e=>{if(!e.trim())throw new Error("グループ名を入力してください");if(e.length>50)throw new Error("グループ名は50文字以内で入力してください");const r={groupName:e.trim(),deleteFlg:!1,finishedRound:[],round:1};try{return(await g(o,{...r,createdAt:n(),updatedAt:n()})).id}catch(t){throw t instanceof Error?new Error(`グループ作成に失敗しました: ${t.message}`):new Error("グループ作成中に予期しないエラーが発生しました")}},[o]),i=s.useCallback(async e=>{var a;const r=c(o,e),t=await u(r);return t.exists()&&!((a=t.data())!=null&&a.deleteFlg)},[o]),p=s.useCallback(async e=>{try{const r=c(o,e),t=await u(r);if(!t.exists())throw new Error("グループが見つかりません");const l=t.data().round+1;await h(r,{round:l,updatedAt:n()})}catch(r){throw console.error("ラウンド更新に失敗しました:",r),r}},[o]);return{createGroup:d,checkGroupExists:i,incrementRound:p,groupCollection:o}};export{D as u};
