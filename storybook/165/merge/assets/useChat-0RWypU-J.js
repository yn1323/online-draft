import{d}from"./firebase-C-ezhxfZ.js";import{c as f,d as n,s as i}from"./index.esm2017-rypblU8U.js";import{r as w}from"./index-BXymfbzT.js";const g=()=>{const e=f(d,"app/onlinedraft/log"),c=w.useCallback(async(t,o,a)=>{if(!t.trim())throw new Error("グループIDが必要です");if(!o.trim())throw new Error("ユーザーIDが必要です");if(!a.trim())throw new Error("メッセージを入力してください");if(a.length>200)throw new Error("メッセージは200文字以内で入力してください");const r={groupId:t.trim(),userId:o.trim(),message:a.trim(),deleteFlg:!1};try{const s=n(e);await i(s,{...r,createdAt:new Date,date:new Date,updatedAt:new Date})}catch(s){throw s instanceof Error?new Error(`メッセージ送信に失敗しました: ${s.message}`):new Error("メッセージ送信中に予期しないエラーが発生しました")}},[e]),m=w.useCallback(async(t,o)=>{if(!t.trim())throw new Error("グループIDが必要です");if(!o.trim())throw new Error("メッセージを入力してください");const a={groupId:t.trim(),userId:"system",message:o.trim(),deleteFlg:!1};try{const r=n(e);await i(r,{...a,createdAt:new Date,date:new Date,updatedAt:new Date})}catch(r){throw r instanceof Error?new Error(`システムメッセージ送信に失敗しました: ${r.message}`):new Error("システムメッセージ送信中に予期しないエラーが発生しました")}},[e]);return{sendMessage:c,sendSystemMessage:m,logCollection:e}};export{g as u};
