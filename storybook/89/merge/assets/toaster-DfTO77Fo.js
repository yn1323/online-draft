import"./create-recipe-context-oy0ofMwS.js";import{c as E}from"./index-BRNWFSEf.js";import{b as x,r as y,I as w}from"./index-JKOH53Am.js";var D=E("toast").parts("group","root","title","description","actionTrigger","closeTrigger");D.build();var I=(i,c)=>({...c,...x(i)});function k(i){const c=I(i,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let f=[],r=[],m=new Set,d=[];const v=e=>(f.push(e),()=>{const s=f.indexOf(e);f.splice(s,1)}),o=e=>(f.forEach(s=>s(e)),e),b=e=>{if(r.length>=c.max){d.push(e);return}o(e),r.unshift(e)},S=()=>{for(;d.length>0&&r.length<c.max;){const e=d.shift();e&&(o(e),r.unshift(e))}},a=e=>{const s=e.id??`toast:${w()}`,u=r.find(t=>t.id===s);return m.has(s)&&m.delete(s),u?r=r.map(t=>t.id===s?o({...t,...e,id:s}):t):b({id:s,duration:c.duration,removeDelay:c.removeDelay,type:"info",...e,stacked:!c.overlap,gap:c.gap}),s},h=e=>(m.add(e),e?(f.forEach(s=>s({id:e,dismiss:!0})),r=r.filter(s=>s.id!==e),S()):(r.forEach(s=>{f.forEach(u=>u({id:s.id,dismiss:!0}))}),r=[],d=[]),e);return{attrs:c,subscribe:v,create:a,update:(e,s)=>a({id:e,...s}),remove:h,dismiss:e=>{e!=null?r=r.map(s=>s.id===e?o({...s,message:"DISMISS"}):s):r=r.map(s=>o({...s,message:"DISMISS"}))},error:e=>a({...e,type:"error"}),success:e=>a({...e,type:"success"}),info:e=>a({...e,type:"info"}),warning:e=>a({...e,type:"warning"}),loading:e=>a({...e,type:"loading"}),getVisibleToasts:()=>r.filter(e=>!m.has(e.id)),getCount:()=>r.length,promise:(e,s,u={})=>{if(!s)return;let t;s.loading!==void 0&&(t=a({...u,...s.loading,promise:e,type:"loading"}));let g=t!==void 0,p;const T=y(e).then(async n=>{if(p=["resolve",n],O(n)&&!n.ok){g=!1;const l=y(s.error,`HTTP Error! status: ${n.status}`);a({...u,...l,id:t,type:"error"})}else if(s.success!==void 0){g=!1;const l=y(s.success,n);a({...u,...l,id:t,type:"success"})}}).catch(async n=>{if(p=["reject",n],s.error!==void 0){g=!1;const l=y(s.error,n);a({...u,...l,id:t,type:"error"})}}).finally(()=>{var n;g&&(h(t),t=void 0),(n=s.finally)==null||n.call(s)});return{id:t,unwrap:()=>new Promise((n,l)=>T.then(()=>p[0]==="reject"?l(p[1]):n(p[1])).catch(l))}},pause:e=>{e!=null?r=r.map(s=>s.id===e?o({...s,message:"PAUSE"}):s):r=r.map(s=>o({...s,message:"PAUSE"}))},resume:e=>{e!=null?r=r.map(s=>s.id===e?o({...s,message:"RESUME"}):s):r=r.map(s=>o({...s,message:"RESUME"}))},isVisible:e=>!m.has(e)&&!!r.find(s=>s.id===e),isDismissed:e=>m.has(e),expand:()=>{r=r.map(e=>o({...e,stacked:!0}))},collapse:()=>{r=r.map(e=>o({...e,stacked:!1}))}}}var O=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number";const P=i=>k(i),X=P({placement:"bottom-end",pauseOnPageIdle:!0});export{X as t};
