import{j as e}from"./create-recipe-context-oy0ofMwS.js";import{r as p}from"./index-BXymfbzT.js";import{t as s}from"./toaster-DfTO77Fo.js";import{J as j}from"./index-DWpg2sRZ.js";import{J as M}from"./index-BPHOnMuL.js";import{R as I}from"./index-Gzlbzq8B.js";import{B as E}from"./box-D1Z_KUxa.js";import{C as S}from"./container-UOJWdtDL.js";import{V as d}from"./v-stack-DNelLgfG.js";import{H as w}from"./heading-DBVE1Ygw.js";import{T as L}from"./text-DkCoEBoG.js";import"./jsx-runtime-Bw5QeaCk.js";import"./index-BRNWFSEf.js";import"./index-JKOH53Am.js";import"./schemas-DKOp7kU_.js";import"./types-DwQkBYn-.js";import"./index-ZS65BhKO.js";import"./iconBase-BtwG8oUN.js";import"./create-slot-recipe-context-C5Qijpj2.js";import"./factory-4NXM9rHI.js";import"./index-By25cWhp.js";import"./input-Dg388lLb.js";import"./field.anatomy-BZ5UhGuB.js";import"./button-Duda3c3S.js";import"./h-stack-e-BLBiSK.js";import"./stack-BRg6br_m.js";import"./index-DTSGLcC3.js";import"./simple-grid-qwmDqksS.js";import"./grid-CQT4z8bD.js";async function u(t){return!t||t.trim().length===0?{success:!1,error:"会議IDが入力されていません"}:t.length<3?{success:!1,error:"無効な会議IDです"}:{success:!0,meetingId:t}}const R=[{id:"abc123",name:"今日のランチドラフト",lastJoined:"2時間前"},{id:"def456",name:"映画選びドラフト",lastJoined:"1日前"},{id:"ghi789",name:"チームドラフト",lastJoined:"3日前"}],_=()=>{const[t,c]=p.useState(null),[y,m]=p.useState(!1),x=async o=>{var r;m(!0);try{let i=o.meetingInput.trim();const l=o.meetingInput.match(/\/(entry|lobby)\/([a-zA-Z0-9]+)/);l&&(i=l[2]);const a=await u(i);if(a.success)window.location.href=`/lobby/${a.meetingId}`;else{const J=(r=a.error)!=null&&r.includes("見つから")?"参加コードが見つかりませんでした。主催者に確認してみてください。":"参加できませんでした。参加コードを確認してください。";s.create({title:"参加できませんでした",description:J,type:"error",duration:5e3})}}catch(i){console.error("参加エラー:",i),s.create({title:"接続エラー",description:"接続に問題が発生しました。しばらく待ってから再度お試しください。",type:"error",duration:5e3})}finally{m(!1)}},b=async o=>{c(o);try{const r=await u(o);r.success?window.location.href=`/lobby/${r.meetingId}`:s.create({title:"参加できませんでした",description:"グループが見つかりませんでした。",type:"error",duration:5e3})}catch(r){console.error("参加エラー:",r),s.create({title:"参加エラー",description:"参加できませんでした。",type:"error",duration:5e3})}finally{c(null)}};return e.jsx(E,{minHeight:"100vh",bg:"bg",children:e.jsx(S,{maxW:"container.md",py:{base:4,md:8},children:e.jsxs(d,{gap:{base:6,md:8},align:"stretch",children:[e.jsxs(d,{gap:2,textAlign:"center",children:[e.jsx(w,{as:"h1",size:{base:"lg",md:"xl"},fontWeight:"bold",color:"gray.800",_dark:{color:"gray.100"},children:"グループに参加"}),e.jsx(L,{fontSize:{base:"sm",md:"md"},color:"gray.600",_dark:{color:"gray.400"},children:"参加コードやURLを入力してください"})]}),e.jsx(j,{onSubmit:x,isLoading:y}),e.jsx(I,{meetings:R,onJoinMeeting:b,loadingMeetingId:t}),e.jsx(M,{})]})})})},se={title:"Features/Join/JoinPage",component:_,parameters:{layout:"fullscreen"}},n={};var g,f,h;n.parameters={...n.parameters,docs:{...(g=n.parameters)==null?void 0:g.docs,source:{originalSource:"{}",...(h=(f=n.parameters)==null?void 0:f.docs)==null?void 0:h.source}}};const ne=["Default"];export{n as Default,ne as __namedExportsOrder,se as default};
