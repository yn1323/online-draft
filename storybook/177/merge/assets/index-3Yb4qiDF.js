import{j as e}from"./stack-B25eOQea.js";import{u as B,a as E}from"./zod-C0AimxcA.js";import{r as y}from"./index-BXymfbzT.js";import{A as D}from"./index-CUneVrWE.js";import{I as w}from"./index-bOlNTxDG.js";import{R as I}from"./responsive-modal-DLT1hDTr.js";import{V as g}from"./v-stack-DLbVHDKJ.js";import{T as i}from"./text-ddCD_fM-.js";import{S as M}from"./simple-grid-DKuTOOEA.js";import{B as c}from"./box-BDoFiJcT.js";import{ar as N,aF as V}from"./types-DwQkBYn-.js";const z=N({userName:V().min(1,"名前を入力してください").max(20,"ユーザー名は20文字以内で入力してください").trim()}),x=({isOpen:o,onClose:s,onConfirm:l,usedAvatars:a=[]})=>{const[n,u]=y.useState(""),{register:C,handleSubmit:S,formState:{errors:d,isValid:A,isSubmitting:v},reset:m}=B({resolver:E(z),mode:"onChange",defaultValues:{userName:""}}),b=Array.from({length:18},(r,t)=>(t+1).toString()),j=async r=>{n&&(await l({name:r.userName,avatar:n}),m(),u(""))},p=()=>{m(),u(""),s()},_=r=>a.includes(r),F=n&&A;return e.jsxs(I,{isOpen:o,onClose:p,title:"ドラフトに参加",actions:{cancel:{text:"キャンセル",onClick:p},submit:{text:"登録する",disabled:!F,loading:v,onClick:S(j)}},children:[e.jsxs(g,{gap:2,align:"start",w:"full",children:[e.jsx(i,{fontSize:["sm","md"],fontWeight:"bold",color:"gray.700",children:"あなたの名前"}),e.jsx(w,{...C("userName"),placeholder:"名前を入力してください",maxLength:20,size:"lg",error:!!d.userName}),d.userName&&e.jsx(i,{fontSize:"sm",color:"red.500",children:d.userName.message})]}),e.jsxs(g,{gap:4,align:"start",w:"full",children:[e.jsx(i,{fontSize:["sm","md"],fontWeight:"bold",color:"gray.700",children:"アバターを選択"}),e.jsx(M,{columns:[4,6],gap:3,w:"full",children:b.map(r=>{const t=_(r),f=n===r;return e.jsxs(c,{position:"relative",cursor:t?"not-allowed":"pointer",opacity:t?.4:1,onClick:()=>!t&&u(r),children:[e.jsx(c,{p:.5,borderRadius:"lg",border:"2px solid",borderColor:f?"blue.400":t?"gray.300":"gray.200",bg:f?"blue.50":"white",transition:"all 0.15s",display:"flex",alignItems:"center",justifyContent:"center",_hover:t?{}:{borderColor:"blue.400",transform:"scale(1.05)"},children:e.jsx(D,{avatarNumber:r,size:"md",noBorder:!0})}),t&&e.jsx(c,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"red.500",color:"white",borderRadius:"full",w:"20px",h:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",fontWeight:"bold",children:"×"})]},r)})}),e.jsx(i,{fontSize:"xs",color:"gray.500",children:"×マークは他の参加者が使用中のアバターです"})]})]})},h=()=>{const[o,s]=y.useState(!1),l=()=>s(!0),a=()=>s(!1);return{isOpen:o,open:l,close:a,modalProps:{isOpen:o,onClose:a}}};try{x.displayName="AvatarSelectionModal",x.__docgenInfo={description:`アバター選択モーダル
新規参加者用のアバター・名前選択UI`,displayName:"AvatarSelectionModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"(userData: { name: string; avatar: string; }) => void | Promise<void>"}},usedAvatars:{defaultValue:{value:"[]"},description:"",name:"usedAvatars",required:!1,type:{name:"string[]"}}}}}catch{}try{h.displayName="useAvatarSelectionModal",h.__docgenInfo={description:`AvatarSelectionModal用カスタムフック
他のモーダルと同じパターンで開閉制御を提供`,displayName:"useAvatarSelectionModal",props:{}}}catch{}export{x as A};
