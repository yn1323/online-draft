import{j as e}from"./stack-B25eOQea.js";import{u as _,a as F}from"./zod-Bx0w6FpW.js";import{r as w}from"./index-BXymfbzT.js";import{A as B}from"./index-CWtFKQuP.js";import{I as V}from"./index-Bxr0EmBi.js";import{R as z}from"./responsive-modal-Blneuz5B.js";import{V as c}from"./v-stack-DLbVHDKJ.js";import{T as s}from"./text-ddCD_fM-.js";import{S as E}from"./simple-grid-DKuTOOEA.js";import{B as i}from"./box-BDoFiJcT.js";import{ar as I,aF as N}from"./types-DwQkBYn-.js";const D=I({userName:N().min(1,"名前を入力してください").max(20,"ユーザー名は20文字以内で入力してください").trim()}),p=({isOpen:l,onClose:f,onConfirm:g,usedAvatars:x=[]})=>{const[o,a]=w.useState(""),{register:h,handleSubmit:y,formState:{errors:n,isValid:S,isSubmitting:C},reset:u}=_({resolver:F(D),mode:"onChange",defaultValues:{userName:""}}),b=Array.from({length:18},(r,t)=>(t+1).toString()),j=async r=>{o&&(await g({name:r.userName,avatar:o}),u(),a(""))},d=()=>{u(),a(""),f()},v=r=>x.includes(r),A=o&&S;return e.jsxs(z,{isOpen:l,onClose:d,title:"ドラフトに参加",actions:{cancel:{text:"キャンセル",onClick:d},submit:{text:"登録する",disabled:!A,loading:C,onClick:y(j)}},children:[e.jsxs(c,{gap:2,align:"start",w:"full",children:[e.jsx(s,{fontSize:["sm","md"],fontWeight:"bold",color:"gray.700",children:"あなたの名前"}),e.jsx(V,{...h("userName"),placeholder:"名前を入力してください",maxLength:20,size:"lg",error:!!n.userName}),n.userName&&e.jsx(s,{fontSize:"sm",color:"red.500",children:n.userName.message})]}),e.jsxs(c,{gap:4,align:"start",w:"full",children:[e.jsx(s,{fontSize:["sm","md"],fontWeight:"bold",color:"gray.700",children:"アバターを選択"}),e.jsx(E,{columns:[4,6],gap:3,w:"full",children:b.map(r=>{const t=v(r),m=o===r;return e.jsxs(i,{position:"relative",cursor:t?"not-allowed":"pointer",opacity:t?.4:1,onClick:()=>!t&&a(r),children:[e.jsx(i,{p:.5,borderRadius:"lg",border:"2px solid",borderColor:m?"blue.400":t?"gray.300":"gray.200",bg:m?"blue.50":"white",transition:"all 0.15s",display:"flex",alignItems:"center",justifyContent:"center",_hover:t?{}:{borderColor:"blue.400",transform:"scale(1.05)"},children:e.jsx(B,{avatarNumber:r,size:"md",noBorder:!0})}),t&&e.jsx(i,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"red.500",color:"white",borderRadius:"full",w:"20px",h:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"xs",fontWeight:"bold",children:"×"})]},r)})}),e.jsx(s,{fontSize:"xs",color:"gray.500",children:"×マークは他の参加者が使用中のアバターです"})]})]})};try{p.displayName="AvatarSelectionModal",p.__docgenInfo={description:`アバター選択モーダル
新規参加者用のアバター・名前選択UI`,displayName:"AvatarSelectionModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"(userData: { name: string; avatar: string; }) => void | Promise<void>"}},usedAvatars:{defaultValue:{value:"[]"},description:"",name:"usedAvatars",required:!1,type:{name:"string[]"}}}}}catch{}export{p as A};
